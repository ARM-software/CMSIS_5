<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Setup Build Environment</title>
<title>CMSIS-Build: Setup Build Environment</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="cmsis.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="CMSIS_Logo_Final.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CMSIS-Build
   &#160;<span id="projectnumber">Version 0.9.0 (beta)</span>
   </div>
   <div id="projectbrief">Tools, software frameworks, and work flows for productivity with CMSIS based projects</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cbuild_install.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Setup Build Environment </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The command line build environment for projects that are based on the CMSIS-Pack standard requires:</p>
<ul>
<li>Required: <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)" target="_blank"><b>Bash</b></a> for script execution.</li>
<li>Optional: <a class="el" href="cbuild_install.html#libxml">xmllint</a> for XML schema verification.</li>
</ul>
<p>With most Linux distributions these tools are already available. The installation for Windows is explained below.</p>
<p><b>Required for Windows: Bash</b></p>
<ul>
<li><a href="https://gitforwindows.org/" target="_blank"><b>git for Windows</b></a> includes <b>Git Bash</b> which is easy to download and install.</li>
</ul>
<h1><a class="anchor" id="cbuild_install2"></a>
cbuild_install.sh: Install Build Tools</h1>
<p>CMSIS-Build tools are available for download as an asset of the respective <a href="https://github.com/ARM-software/CMSIS_5/releases/" target="_blank"><b>CMSIS Release Version</b></a> (starting 5.7.0 e/o April 2020).</p>
<p>To install the command line build environment start from the Bash prompt: </p>
<div class="fragment"><div class="line">$ ./cbuild_install.sh</div>
</div><!-- fragment --><p>This install script queries for:</p>
<ul>
<li>Directory for the installation of the CMSIS command line build tools (default ./cbuild).</li>
<li>When Keil MDK is installed, enter the base directory of the MDK installation (default /c/Keil_v5).</li>
<li>Directory to store the content of the software packs in CMSIS-Pack format.</li>
</ul>
<h1><a class="anchor" id="cbuild_envsetup"></a>
Environment Variables</h1>
<p>The file <b>./cbuild/etc/setup</b> configures the CMSIS command line build environment. It contains the following section that should reflect the actual installation.</p>
<p><b>File: ./cbuild/etc/setup</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">############### EDIT BELOW ###############</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">export CMSIS_PACK_ROOT=/C/Users/myname/AppData/Local/Arm/Packs</div>
<div class="line">export CMSIS_COMPILER_ROOT=/C/myname/cbuild</div>
<div class="line">export MDK_ROOT=/C/Keil_v5</div>
</div><!-- fragment --><p>The file <b>./cbuild/etc/setup</b> is used to setup environment variables in Bash using the <b>source</b> command: </p>
<div class="fragment"><div class="line">$ source ./cbuild/etc/setup</div>
</div><!-- fragment --><table class="doxtable">
<tr>
<th align="left">Variable </th><th align="left">Description  </th></tr>
<tr>
<td align="left"><code>$CMSIS_PACK_ROOT</code> </td><td align="left">Directory that contains the software packs in CMSIS-Pack format. </td></tr>
<tr>
<td align="left"><code>$CMSIS_COMPILER_ROOT</code> </td><td align="left">Directory that contains the <a class="el" href="cbuild_install.html#cbuild_compiler_config">Compiler Configuration</a>. </td></tr>
<tr>
<td align="left"><code>$CMSIS_BUILD_ROOT</code> </td><td align="left">Base directory of the CMSIS command line build tools. </td></tr>
<tr>
<td align="left"><code>$MDK_ROOT</code> </td><td align="left">Base directory of the MDK installation (optional). </td></tr>
</table>
<h1><a class="anchor" id="cbuild_compiler_config"></a>
Compiler Configuration</h1>
<p>The CMSIS <a class="el" href="cbuildgen.html">cbuildgen: Build Process Manager</a> uses toolchain specific <b>.mak files</b> that map the CMSIS project settings to the toolchain. For each supported toolchain a <b>.mak files</b> is provided in the directory <b>./cbuild/etc</b> and specifies the base directory of the toolchain installation (TOOLCHAIN_ROOT). In addition other toolchain specific environment variables may be setup here (e.g. license file and product variant). The user is required to update the these settings after installation to reflect the actual installation.</p>
<p><b>Example file: ./cbuild/etc/ARMCC.6.13.1.mak</b></p>
<div class="fragment"><div class="line"><span class="preprocessor"># Version: 1.0.0</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># Date: 2020-02-11</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># This file maps the CMSIS project options to toolchain settings.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   - Applies to toolchain: ARMCC 6.13.1 </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">############### EDIT BELOW ###############</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># Set base directory of toolchain</span></div>
<div class="line"><span class="preprocessor"></span>TOOLCHAIN_ROOT:=/C/Keil_v5/ARM/ARMCLANG</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Licensing</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#export ARMLMD_LICENSE_FILE=todo</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#export ARM_PRODUCT_DEF=$(TOOLCHAIN_ROOT)/../../mappings/gold.elmap</span></div>
<div class="line"><span class="preprocessor"></span> </div>
<div class="line"><span class="preprocessor">############ DO NOT EDIT BELOW ###########</span></div>
</div><!-- fragment --><p>The toolchain for compilation is defined in project file <b>*.cprj</b> and used by <a class="el" href="cbuildgen.html">cbuildgen: Build Process Manager</a>. The <a class="el" href="cbuildgen.html">cbuildgen: Build Process Manager</a> first searches for the toolchain specific <b>.mak file</b> in the project directory. If the toolchain specific <b>.mak file</b> is not present there, it uses the directory that is specified by the <b>$CMSIS_BUILD_ROOT</b> environment variable.</p>
<h1><a class="anchor" id="libxml"></a>
libxml (optional for Windows)</h1>
<p>For Windows the <a href="https://www.zlatkovic.com/pub/libxml/" target="_blank"><b>libxml</b></a> provides an XML processor that provides the functionality of <b>xmllint</b>.</p>
<dl class="section note"><dt>Note</dt><dd>The installation is optional and not required to run the command line build tools.</dd></dl>
<p>Download the following ZIP files:</p>
<ul>
<li><b>iconv-1.9.2.win32.zip</b></li>
<li><b>libxml2-2.7.8.win32.zip</b></li>
<li><b>libxmlsec-1.2.18.win32.zip</b></li>
<li><b>zlib-1.2.5.win32.zip</b></li>
</ul>
<p>Extract the <b>/bin</b> directory of each ZIP file to a directory, for example <b>C:\xmllint</b> and add this directory to the Windows <a href="https://answers.microsoft.com/en-us/windows/forum/windows_10-other_settings/adding-path-variable/97300613-20cb-4d85-8d0e-cc9d3549ba23" target="_blank"><b>PATH</b></a> environment variable.</p>
<dl class="section note"><dt>Note</dt><dd>Restart the <b>Git Bash</b> after changing the <b>PATH</b> environment variable. </dd>
<dd>
When <b>xmllint</b> is not installed, the XML schema verification is skipped by the <a class="el" href="cbuild.html">cbuild.sh</a> script.</dd></dl>
<p>xmllint is also provided by the xsltproc package that can be installed via <a href="https://chocolatey.org/packages/xsltproc" target="_blank"><b>Chocolatey</b></a>: </p>
<div class="fragment"><div class="line">&gt; choco install xsltproc</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="CmdLineBuild.html">Command Line Build</a></li>
    <li class="footer">Generated on Thu Apr 9 2020 15:49:55 for CMSIS-Build Version 0.9.0 (beta) by Arm Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
