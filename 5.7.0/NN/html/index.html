<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CMSIS NN Software Library</title>
<title>CMSIS-NN: CMSIS NN Software Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="cmsis.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="CMSIS_Logo_Final.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CMSIS-NN
   &#160;<span id="projectnumber">Version 1.3.0</span>
   </div>
   <div id="projectbrief">CMSIS NN Software Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CMSIS NN Software Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction </h2>
<p>This user manual describes the CMSIS NN software library, a collection of efficient neural network kernels developed to maximize the performance and minimize the memory footprint of neural networks on Cortex-M processor cores.</p>
<p>The library is divided into a number of functions each covering a specific category:</p>
<ul>
<li>Convolution Functions</li>
<li>Activation Functions</li>
<li>Fully-connected Layer Functions</li>
<li>Pooling Functions</li>
<li>Softmax Functions</li>
<li>Basic math Functions</li>
</ul>
<p>The library has separate functions for operating on different weight and activation data types including 8-bit integers (q7_t) and 16-bit integers (q15_t). The descrition of the kernels are included in the function description. The implementation details are also described in this paper [1].</p>
<h2>Function Classification </h2>
<p>The functions can be classified into two segments</p>
<ul>
<li>Legacy functions supporting ARM's internal symmetric quantization(8 bits).</li>
<li>Functions that support TensorFlow Lite framework with symmetric quantization(8 bits).</li>
</ul>
<p>The legacy functions can be identified with their suffix of _q7 or _q15 and are no new development is done there. The article in [2] describes in detail how to run a network using the legacy functions.</p>
<p>The functions supporting TensorFlow Lite framework is identified by the _s8 suffix and can be invoked from TFL micro. The functions are bit exact to TensorFlow Lite. Refer to the TensorFlow's documentation in [3] on how to run a TensorFlow Lite model using optimized CMSIS-NN kernels.</p>
<h2>Block Diagram </h2>
<div class="image">
<img src="CMSIS-NN-OVERVIEW.PNG" alt="CMSIS-NN-OVERVIEW.PNG"/>
</div>
<h2>Examples </h2>
<p>The library ships with a number of examples which demonstrate how to use the library functions.</p>
<h2>Pre-processor Macros </h2>
<p>Each library project have different pre-processor macros.</p>
<ul>
<li>ARM_MATH_DSP:</li>
</ul>
<p>Define macro ARM_MATH_DSP, If the silicon supports DSP instructions(DSP extension).</p>
<ul>
<li>ARM_MATH_MVEI:</li>
</ul>
<p>Define macro ARM_MATH_MVEI, If the silicon supports M-Profile Vector Extension.</p>
<ul>
<li>ARM_MATH_AUTOVECTORIZE Used in conjucture with ARM_MATH_MVEI to let the compiler auto vectorize for the functions that uses inline assembly. It does not affect functions that use C or intrinsics.</li>
<li>ARM_MATH_BIG_ENDIAN:</li>
</ul>
<p>Define macro ARM_MATH_BIG_ENDIAN to build the library for big endian targets. This is supported only for the legacy functions i.e, functions targetted at TensorFlow Lite do not support big endianness. By default library builds for little endian targets.</p>
<ul>
<li>ARM_NN_TRUNCATE:</li>
</ul>
<p>Define macro ARM_NN_TRUNCATE to use floor instead of round-to-the-nearest-int for the computation.</p>
<h2>Upcoming Interface Change </h2>
<p>Starting from the 1.4.0 next release, CMSIS-NN will gradually switch to a new API interface to:</p>
<ol type="1">
<li>have a stable API</li>
<li>avoid passing many variables by value</li>
<li>improve security</li>
<li>improve validation</li>
<li>improve code readability</li>
</ol>
<p>The upcoming API interface change will be based on "struct" and only affect the TensorFlowLite micro compliant APIs [4] (functions with _s8 suffix)</p>
<p>Below you can find a snapshot of how the new API interface will look like (names can change)</p>
<p>i.e. arm_convolve_1x1_s8_fast</p>
<table class="doxtable">
<tr>
<th>Current API interface </th><th>New API interface proposal  </th></tr>
<tr>
<td>const q7_t *input </td><td>const cmsis_nn_context &amp;ctx </td></tr>
<tr>
<td>const uint16_t input_x </td><td>const cmsis_nn_conv_params &amp;params </td></tr>
<tr>
<td>const uint16_t input_y </td><td>const cmsis_nn_dims &amp;input_dims </td></tr>
<tr>
<td>const uint16_t input_ch </td><td>const q7_t *input_data </td></tr>
<tr>
<td>const uint16_t input_batches </td><td>const cmsis_nn_dims &amp;filter_dims </td></tr>
<tr>
<td>const q7_t *kernel </td><td>const q7_t *filter_data </td></tr>
<tr>
<td>const uint16_t output_ch </td><td>const cmsis_nn_dims &amp;bias_dims </td></tr>
<tr>
<td>const uint16_t pad_x </td><td>const q31_t *bias_data </td></tr>
<tr>
<td>const uint16_t pad_y </td><td>const cmsis_nn_dims &amp;output_dims </td></tr>
<tr>
<td>const uint16_t stride_x </td><td>q7_t *output_data </td></tr>
<tr>
<td>const uint16_t stride_y </td><td><br/>
 </td></tr>
<tr>
<td>const int32_t *bias </td><td><br/>
 </td></tr>
<tr>
<td>q7_t *output </td><td><br/>
 </td></tr>
<tr>
<td>const int32_t *output_shift </td><td><br/>
 </td></tr>
<tr>
<td>const int32_t *output_mult </td><td><br/>
 </td></tr>
<tr>
<td>const int32_t out_offset </td><td><br/>
 </td></tr>
<tr>
<td>const int32_t input_offset </td><td><br/>
 </td></tr>
<tr>
<td>const int32_t out_activation_min </td><td><br/>
 </td></tr>
<tr>
<td>const int32_t out_activation_max </td><td><br/>
 </td></tr>
<tr>
<td>const uint16_t output_x </td><td><br/>
 </td></tr>
<tr>
<td>const uint16_t output_y </td><td><br/>
 </td></tr>
<tr>
<td>q15_t *buffer_a </td><td><br/>
 </td></tr>
</table>
<h2>Copyright Notice </h2>
<p>Copyright (C) 2010-2019 Arm Limited. All rights reserved.</p>
<p>[1] CMSIS-NN: Efficient Neural Network Kernels for Arm Cortex-M CPUs <a href="https://arxiv.org/abs/1801.06601">https://arxiv.org/abs/1801.06601</a></p>
<p>[2] Converting a Neural Network for Arm Cortex-M with CMSIS-NN <a href="https://developer.arm.com/solutions/machine-learning-on-arm/developer-material/how-to-guides/converting-a-neural-network-for-arm-cortex-m-with-cmsis-nn/single-page">https://developer.arm.com/solutions/machine-learning-on-arm/developer-material/how-to-guides/converting-a-neural-network-for-arm-cortex-m-with-cmsis-nn/single-page</a> [3] <a href="https://www.tensorflow.org/lite/microcontrollers/library">https://www.tensorflow.org/lite/microcontrollers/library</a></p>
<p>[4] <a href="https://github.com/ARM-software/CMSIS_5/tree/develop/CMSIS/NN#legacy-vs-tfl-micro-compliant-apis">https://github.com/ARM-software/CMSIS_5/tree/develop/CMSIS/NN#legacy-vs-tfl-micro-compliant-apis</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Apr 9 2020 15:49:35 for CMSIS-NN Version 1.3.0 by Arm Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
