<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Pack Tutorials</title>
<title>CMSIS-Pack: Pack Tutorials</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="cmsis.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="CMSIS_Logo_Final.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CMSIS-Pack
   &#160;<span id="projectnumber">Version 1.6.3</span>
   </div>
   <div id="projectbrief">Delivery Mechanism for Software Packs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cp_PackTutorial.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Pack Tutorials </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <b>ARM::CMSIS</b> Pack contains tutorials that are explained on the following pages. In the <b>\CMSIS\Pack\Tutorials</b> directory the following three ZIP files are available: </p>
<table class="doxtable">
<tr>
<th>ZIP File </th><th>Documentation  </th></tr>
<tr>
<td>Pack_with_Software_Components.zip </td><td><a class="el" href="cp_PackTutorial.html#cp_SWComponents">Pack with Software Components</a> </td></tr>
<tr>
<td>Pack_with_Device_Support.zip </td><td><a class="el" href="cp_PackTutorial.html#createPack_DFP">Pack with Device Support</a> </td></tr>
<tr>
<td>Pack_with_Board_Support.zip </td><td><a class="el" href="cp_PackTutorial.html#createPackBoard">Pack with Board Support</a> </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>To work with these tutorials, make sure that you have installed the environment that is required for the <a class="el" href="bash_script.html">Bash Script gen_pack.sh</a> as this will be used to verify and create the tutorial packs.</dd></dl>
<h1><a class="anchor" id="cp_PackSteps"></a>
Steps to Create a Pack</h1>
<p>The following image shows the basic steps that are required to create a Software Pack:</p>
<ol type="1">
<li><b>Produce input:</b> Create the files that will be delivered with the Pack (source code, header and library files, documentation).</li>
<li><b>Organize files:</b> For better maintainability, use directories to separate the content of the Pack.</li>
<li><b>Create PDSC file:</b> The XML based PDSC file can be created using any text editor. Editors that can <a class="el" href="cp_Editors.html">validate XML</a> code against a schema file help to find bugs early in the Pack development stage.</li>
<li><b>Generate Pack:</b> Any compression tool supporting the ZIP format can be used to create a Pack file. <a class="el" href="packChk.html">PackChk</a> is helpful for the validation of the contents of a Pack.</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>Steps 3 and 4 are covered automatically if you are using the <a class="el" href="bash_script.html">gen_pack.sh</a> script to generate the pack.</dd></dl>
<p>The following sections show how to create a Software Pack from scratch:</p>
<ul>
<li><a class="el" href="cp_PackTutorial.html#cp_SWComponents">Pack with Software Components</a> starts with a simple Pack containing only the PDSC file and a single software component and then explains further elements of a Pack in more detail.</li>
<li><a class="el" href="cp_PackTutorial.html#createPack_DFP">Pack with Device Support</a> adds information on the specific requirements that a DFP has.</li>
<li><a class="el" href="cp_PackTutorial.html#createPackBoard">Pack with Board Support</a> elaborates on the content specific to a BSP.</li>
</ul>
<h1><a class="anchor" id="cp_SWComponents"></a>
Pack with Software Components</h1>
<p>This tutorial explains how to create a Software Pack. First, a simple Software Pack is created that contains only one software component. Then, it is extended to show the various features for describing software components.</p>
<p><b>Preparations</b></p>
<ol type="1">
<li>Create a working directory on you PC, for example <b>C:\temp\working</b>.</li>
<li>Go to the directory <b>\CMSIS\Pack\Tutorials</b> available in the <b>ARM::CMSIS</b> Pack installation. Please consult your development tool's documentation for more information on the Pack installation directory structure. In a standard ÂµVision installation, you will find it below <b>%localappdata%\Arm\Packs\ARM\CMSIS\<em>version</em></b>.</li>
<li>Unzip the file <b>Pack_with_Software_Components.zip</b>.</li>
<li>Copy the <em>content</em> of the ZIP file's <b>01_Create_PDSC</b> directory into your working directory.</li>
<li>Copy the <a class="el" href="bash_script.html">gen_pack.sh</a> script from your CMSIS-Pack installation's <b>\CMSIS\Pack\Bash</b> directory to the working directory.</li>
<li>Make sure that files/directories are not write protected (remove read-only flag).</li>
</ol>
<h2><a class="anchor" id="cp_CreatePDSC"></a>
Create PDSC File</h2>
<ol>
<li>
<p class="startli">Open the file <b>vendor.pack_name.pdsc</b> in an editor and change it like this: </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keyword">package </span>schemaVersion=&quot;1.6.3&quot; xmlns:xs=&quot;http:<span class="comment">//www.w3.org/2001/XMLSchema-instance&quot; xs:noNamespaceSchemaLocation=&quot;PACK.xsd&quot;&gt;</span></div>
<div class="line">  &lt;vendor&gt;MyVendor&lt;/vendor&gt;</div>
<div class="line">  &lt;name&gt;MyPack&lt;/name&gt;</div>
<div class="line">  &lt;description&gt;Internal Software Pack&lt;/description&gt;</div>
<div class="line">  &lt;url&gt;&lt;/url&gt;</div>
<div class="line">  &lt;supportContact&gt;&lt;/supportContact&gt;</div>
<div class="line">  &lt;license&gt;Docs/license.txt&lt;/license&gt;</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>All code examples in this and the following sections can be found in the <code>snippets.xml</code> file in the <b>01_Create_PDSC</b> directory.</dd></dl>
<p>A PDSC file starts with information on the XML version and the encoding. The <a class="el" href="pdsc_package_pg.html">&lt;package&gt;</a> element declares the version of the schema file and the XSD file that is used to validate the PDSC file:</p>
<ul>
<li><a class="el" href="pdsc_package_pg.html#element_package">&lt;name&gt;</a> specifies the name of the Pack and <em>must</em> <em>not</em> contain spaces. <b>Example:</b> <code>MyPack</code> and <code>My_Pack</code> are ok, <code>My</code> <code>Pack</code> is not ok.</li>
<li><a class="el" href="pdsc_package_pg.html#element_package">&lt;description&gt;</a> describes the Pack in a few words.</li>
<li><a class="el" href="pdsc_package_pg.html#element_package">&lt;vendor&gt;</a> states the name of the Pack's vendor and <em>must</em> <em>not</em> contain spaces. <b>Example:</b> <code>ACMECorp</code> and <code>ACME_Corp</code> are OK, <code>ACME</code> <code>Corporation</code> is not OK.</li>
<li><a class="el" href="pdsc_package_pg.html#element_package">&lt;url&gt;</a> defines the download URL of the Pack (may be left empty) <dl class="section note"><dt>Note</dt><dd><ul>
<li>In this tutorial, the URL is not specified. This means that the Pack will be marked in Pack Installer as <b>Offline</b> and needs to be updated manually. To resolve this issue, it is possible to specify the file "download" location using a <a href="https://en.wikipedia.org/wiki/File_URI_scheme" target="_blank">file URI</a>. For Windows users, this would look like the following: <pre class="fragment">      &lt;url&gt;file:///c:/temp/working&lt;/url&gt;</pre></li>
<li>It is important to understand how the &lt;url&gt; element works. If you specify a URL, for example <a href="https://www.keil.com/pack/" target="_blank">https://www.keil.com/pack</a>, then you have to make the PDSC file and the corresponding Pack file(s) available for download at that exact location. The naming of the files follow the standard naming rules. For example, the ARM::CMSIS PDSC and Pack files are available here:<br/>
 <a href="https://www.keil.com/pack/ARM.CMSIS.pdsc" target="_blank">https://www.keil.com/pack/ARM.CMSIS.pdsc</a> and <br/>
 <a href="https://www.keil.com/pack/ARM.CMSIS.5.7.0.pack" target="_blank">https://www.keil.com/pack/ARM.CMSIS.5.7.0.pack</a> and <br/>
 <a href="https://www.keil.com/pack/ARM.CMSIS.5.6.0.pack" target="_blank">https://www.keil.com/pack/ARM.CMSIS.5.6.0.pack</a> and ... <br/>
 At the specified location, you need to have one (unversioned) PDSC file and can have multiple versioned Pack files, but at least the latest one.</li>
</ul>
</dd></dl>
</li>
<li><a class="el" href="pdsc_package_pg.html#element_package">&lt;supportContact&gt;</a> may provide an email address or web page URL for Pack specific questions/problems.</li>
<li><a class="el" href="pdsc_package_pg.html#element_package">&lt;license&gt;</a> links to an optional license file that will be shown during the installation of the Pack. The installation in development tools will abort if the license agreement is not accepted.  </li>
</ul>
</li>
<li>
<p class="startli">Add release information and keywords: </p>
<div class="fragment"><div class="line">&lt;releases&gt;</div>
<div class="line">  &lt;release version=<span class="stringliteral">&quot;1.0.0&quot;</span>&gt;</div>
<div class="line">    Initial version</div>
<div class="line">  &lt;/release&gt;</div>
<div class="line">&lt;/releases&gt;</div>
<div class="line">    </div>
<div class="line">&lt;keywords&gt;</div>
<div class="line">  &lt;keyword&gt;MyVendor&lt;/keyword&gt;</div>
<div class="line">  &lt;keyword&gt;My Software Component&lt;/keyword&gt;</div>
<div class="line">&lt;/keywords&gt;</div>
</div><!-- fragment --><p> The information from the <a class="el" href="element_releases.html">&lt;releases&gt;</a> section will be used for:</p>
<ul>
<li>Determining the Pack version (required for the file name of the Pack file)</li>
<li>Display of release information</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Usually, you need to add a <code>&lt;date&gt;</code> tag to a <code>&lt;release</code> <code>version&gt;</code>. If you omit this, <a class="el" href="packChk.html">PackChk</a> will issue a warning. To keep the tutorial simple, the <code>&lt;date&gt;</code> tag is not used here (as it requires consecutive dates for different versions).</dd></dl>
<p><a class="el" href="element_keywords.html">&lt;keywords&gt;</a> may be used for better visibility for search engines.  </p>
</li>
<li>
Add a <a class="el" href="pdsc_components_pg.html">&lt;components&gt;</a> section with the following: <div class="fragment"><div class="line">&lt;components&gt;</div>
<div class="line">    &lt;component Cclass=<span class="stringliteral">&quot;MyClass&quot;</span> Cgroup=<span class="stringliteral">&quot;MyGroup&quot;</span> Csub=<span class="stringliteral">&quot;MySubGroup&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.0&quot;</span>&gt;</div>
<div class="line">      &lt;description&gt;MySWComp&lt;/description&gt;</div>
<div class="line">      &lt;files&gt;</div>
<div class="line">        &lt;file category=<span class="stringliteral">&quot;doc&quot;</span>    name=<span class="stringliteral">&quot;Docs/MySWComp.htm&quot;</span>/&gt;</div>
<div class="line">        &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/header_mylib.h&quot;</span>/&gt;</div>
<div class="line">        &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/config/config_mylib.h&quot;</span> attr=<span class="stringliteral">&quot;config&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;</div>
<div class="line">        &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/mylib_one.c&quot;</span>/&gt;</div>
<div class="line">        &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/mylib_two.c&quot;</span>/&gt;</div>
<div class="line">      &lt;/files&gt;</div>
<div class="line">    &lt;/component&gt;</div>
<div class="line">&lt;/components&gt;</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>If you are using a header file with the attribute <span class="XML-Token">config</span>, save it in a separate directory from all other header files as in this example. Configuration files are copied into the project folder and are adopted specifically for that project. But due to the include path search order of the compiler, it might happen that the unmodified header file in the pack repository is found first and used which might end up in unexpected results.</dd></dl>
More information on <b>&lt;components&gt;</b> will be given in section <a class="el" href="cp_PackTutorial.html#cp_Components">Software Components</a>. Save the file and close your editor. In the next section, the generation of a Pack will be explained in detail.  </li>
</ol>
<h2><a class="anchor" id="cp_GeneratePack"></a>
Generate a Pack</h2>
<ol>
<li>
Rename the file <b>vendor.pack_name.pdsc</b> to <b>MyVendor.MyPack.pdsc</b> (according to the &lt;vendor&gt; and &lt;name&gt; elements in the PDSC file).  </li>
<li>
Open <a class="el" href="bash_script.html">gen_pack.sh</a> from your working directory in an editor. Modify the variables <code>CMSIS_PACK_PATH</code> and <code>PATH_TO_ADD</code> reflect your setup. The following is an example for a Git Bash on Windows: <div class="fragment"><div class="line">CMSIS_PACK_PATH=<span class="stringliteral">&quot;$LOCALAPPDATA/Arm/Packs/ARM/CMSIS/5.7.0&quot;</span></div>
<div class="line">PATH_TO_ADD=<span class="stringliteral">&quot;/C/Program Files/7-Zip/:$CMSIS_PACK_PATH/CMSIS/Utilities/Win32/:/C/xmllint/&quot;</span></div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Refer to section <a class="el" href="createPackUtil.html">Utilities for Creating Packs</a> for hints on how to install the required tools.  </dd></dl>
</li>
<li>
Having saved <b>gen_pack.sh</b>, open a Bash console in the current directory and run the script. The shell script will:<ul>
<li>Run a schema check on the PDSC file using <a class="el" href="cp_Editors.html">xmllint</a>.</li>
<li>Run <a class="el" href="packChk.html">PackChk</a></li>
<li>Create the <b>MyVendor.MyPack.1.0.0.pack</b> Pack file in the ./output sub-directory.  </li>
</ul>
</li>
<li>
<p class="startli">Install the Pack by double-clicking it. Depending on the development software that is used, the display of the Pack contents may differ:</p>
<div class="image">
<img src="simplepack_rte.png" alt="simplepack_rte.png"/>
<div class="caption">
MyClass:MyGroup:MySubGroup shown in development tool</div></div>
 </li>
</ol>
<h2><a class="anchor" id="cp_Components"></a>
Software Components</h2>
<p>A component lists the files that belong to it and that are relevant for a project. The component itself or each individual file may refer to a <a class="el" href="pdsc_conditions_pg.html#element_condition">condition</a> that must resolve to true; if it is false, the component or file is not applicable in the given context.</p>
<p>Each software component must have the following attributes that are used to identify the component:</p>
<ul>
<li>Component Class (<code>Cclass</code>): examples are <b>CMSIS</b>, <b>Device</b>, <b>File</b> <b>System</b> </li>
<li>Component Group (<code>Cgroup</code>): examples are <b>CMSIS:RTOS</b>, <b>Device:Startup</b>, <b>File</b> <b>System:CORE</b> </li>
<li>Component Version (<code>Cversion</code>): the version number of the software component.</li>
</ul>
<p>Optionally, a software component may have additional attributes:</p>
<ul>
<li>Component Sub-Group (<code>Csub</code>): examples are <b>CMSIS:RTOS:MyRTOS</b>, <b>Device:Driver</b> <b>USBD:Full-speed</b> </li>
<li>Component Variant (<code>Cvariant</code>): a variant of the software component.</li>
<li>Component Vendor (<code>Cvendor</code>): the supplier of the software component.</li>
</ul>
<p>The <code>Cclass</code>, <code>Cgroup</code>, <code>Csub</code>, <code>Cvariant</code> and <code>Cversion</code> attributes are used together with the vendor specified by the Pack to identify a component. A component vendor must ensure that the combination <code>Cclass</code>, <code>Cgroup</code>, <code>Csub</code> and <code>Cversion</code> is unique and not used by multiple components within the same Pack.</p>
<p>For a list of established <code>Cclass</code> identifiers, refer to <a class="el" href="cp_Packs.html#pack_Cclass">Software Component Cclasses</a>.</p>
<p>In case multiple interdependent components (belonging to the same <code>Cclass</code>) form part of a solution, these can be grouped in a so called <a class="el" href="cp_PackTutorial.html#cp_Bundles">bundle</a>.</p>
<p>Use the following syntax to reference to software components and APIs:<br/>
<b>&lt;Vendor&gt;::&lt;Cclass&gt;:&lt;Cgroup&gt;:&lt;Csub&gt;</b></p>
<p><b>Examples:</b> </p>
<ul>
<li><b>::CMSIS:RTOS (API)</b> - the CMSIS-RTOS API.</li>
<li><b>ARM::CMSIS:DSP</b> - the CMSIS-DSP Library.</li>
<li><b>::File System:Drive:NOR</b> - the NOR Flash Drive of a file system.</li>
</ul>
<p>Here is an example for the display of software components in a development tool:</p>
<div class="image">
<img src="ComponentDisplay.png" alt="ComponentDisplay.png"/>
<div class="caption">
Display of a software component in development tools</div></div>
 <h2>Software Component Files </h2>
<p>Each software component consists of a certain number of files. Each file has at least the following attributes:</p>
<ul>
<li><code>name:</code> File path, file name, and file extension in the format path/name.extension. The file path is relative to the root directory of the Pack.</li>
<li><code>path:</code> For the category="header", the path attribute can be used explicitly to specify the include path to be added to the commandline of the build tools, specifying an incomplete path.</li>
<li><code>category:</code> Defines the purpose of the file. Select the predefined value as listed in the table <a class="el" href="pdsc_components_pg.html#FileCategoryEnum">File Categories</a>.</li>
</ul>
<p>Optionally, every file may have the following attributes:</p>
<ul>
<li><code>attr:</code> Defines the special use and handling of a file. Select a predefined value as defined in the table <a class="el" href="pdsc_components_pg.html#FileAttributeEnum">File Attributes</a>.</li>
<li><code>condition:</code> Enter the identifier (attribute <em><b>id</b></em>) of a <a class="el" href="pdsc_conditions_pg.html#element_condition">condition</a>. The element is used if the condition resolves to <span class="XML-Token">true</span>.</li>
<li><code>select:</code> Brief description and purpose of the file. The <b><em>select</em></b> attribute is <b>required</b> when <b><em>attr</em></b> is set to <span class="XML-Token">template</span> or <span class="XML-Token">interface</span>. When multiple template files of a component have the same <b><em>select</em></b> string, they are treated as a single selectable template. This way, multiple template or interface files can be bundled.</li>
<li><code>src:</code> Path information. The path is specified relative to the Pack Description File (PDSC).</li>
<li><code>version:</code> File-specific version information. This is used particularly for files copied into the project workspace. Before a file gets copied, a version check avoids unnecessary copy actions. If a file does not have a version, then the component version is used.</li>
<li><code>public:</code> Set publishing permissions for the documentation. If <em><b>true</b></em>, the documentation can be extracted and published on a web page.</li>
</ul>
<h2><a class="anchor" id="cp_Conditions"></a>
Conditions</h2>
<p>A condition describes dependencies on:</p>
<ul>
<li>a specific device</li>
<li>a certain processor</li>
<li>tool attributes</li>
<li>the presence of other components</li>
</ul>
<p>Conditions are used to define <b>AND/OR</b> rules that make components conditional and therefore only available under certain circumstances, for example for specific devices or processors. Conditions are also used to express dependencies between software components.</p>
<p>Each condition has an <b>id</b> that is unique within the scope of a the PDSC file. An id can be referenced in the <code>condition</code> attribute of components, APIs, examples, files and other conditions. All attributes set in a <b>accept</b>, <b>require</b>, or <b>deny</b> element must resolve to true for the element to become true. A condition becomes true when:</p>
<ul>
<li>At least one <b>accept</b> element is true, <em>AND</em> </li>
<li>all <b>require</b> elements are true, <em>AND</em> </li>
<li>no <b>deny</b> element is true.</li>
</ul>
<p>If a condition resolves to false during processing, the respective element will be ignored.</p>
<p>Modify the example from the <a class="el" href="cp_PackTutorial.html#cp_CreatePDSC">Create PDSC File</a> section by adding the requirement for a CMSIS-RTOS v2 and libraries that are specific to a certain Cortex-M class core:</p>
<ul>
<li><code>mylib_cm0.lib</code> for use with a Cortex-M0 and Cortex-M0+ processor</li>
<li><code>mylib_cm3.lib</code> for use with a Cortex-M3 processor</li>
<li><code>mylib_cm4.lib</code> for use with a Cortex-M4 or Cortex-M7 processor</li>
</ul>
<p>Copy the <em>content</em> of the <b>02_Conditions/MySWComp</b> directory of the <b>Pack_with_Software_Components.zip</b> file to the current working directory: </p>
<ol>
<li>
Add a <a class="el" href="pdsc_conditions_pg.html">&lt;conditions&gt;</a> section with the following: <div class="fragment"><div class="line">&lt;conditions&gt; </div>
<div class="line">  &lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;Arm Compiler&quot;</span>&gt;</div>
<div class="line">    &lt;require Tcompiler=<span class="stringliteral">&quot;ARMCC&quot;</span> Toptions=<span class="stringliteral">&quot;AC6&quot;</span>/&gt;</div>
<div class="line">  &lt;/condition&gt;</div>
<div class="line">  &lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;CM0&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;Cortex-M0 based device&lt;/description&gt;</div>
<div class="line">    &lt;require condition=<span class="stringliteral">&quot;Arm Compiler&quot;</span>/&gt;</div>
<div class="line">    &lt;accept  Dcore=<span class="stringliteral">&quot;Cortex-M0&quot;</span>/&gt;</div>
<div class="line">    &lt;accept  Dcore=<span class="stringliteral">&quot;Cortex-M0+&quot;</span>/&gt;</div>
<div class="line">  &lt;/condition&gt;</div>
<div class="line">  &lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;CM3&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;Cortex-M3 based device&lt;/description&gt;</div>
<div class="line">    &lt;require condition=<span class="stringliteral">&quot;Arm Compiler&quot;</span>/&gt;</div>
<div class="line">    &lt;accept  Dcore=<span class="stringliteral">&quot;Cortex-M3&quot;</span>/&gt;</div>
<div class="line">  &lt;/condition&gt;</div>
<div class="line">  &lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;CM4_CM7&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;Cortex-M4 based device&lt;/description&gt;</div>
<div class="line">    &lt;require condition=<span class="stringliteral">&quot;Arm Compiler&quot;</span>/&gt;</div>
<div class="line">    &lt;accept  Dcore=<span class="stringliteral">&quot;Cortex-M4&quot;</span>/&gt;</div>
<div class="line">    &lt;accept  Dcore=<span class="stringliteral">&quot;Cortex-M7&quot;</span>/&gt;</div>
<div class="line">  &lt;/condition&gt;</div>
<div class="line">  &lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;CMSIS Core with RTOS2&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;CMSIS Core with RTOS2 <span class="keywordflow">for</span> Cortex-M processor&lt;/description&gt;</div>
<div class="line">    &lt;accept  condition=<span class="stringliteral">&quot;CM0&quot;</span>/&gt;</div>
<div class="line">    &lt;accept  condition=<span class="stringliteral">&quot;CM3&quot;</span>/&gt;</div>
<div class="line">    &lt;accept  condition=<span class="stringliteral">&quot;CM4_CM7&quot;</span>/&gt;</div>
<div class="line">    &lt;require Cclass=<span class="stringliteral">&quot;CMSIS&quot;</span> Cgroup=<span class="stringliteral">&quot;CORE&quot;</span>/&gt;</div>
<div class="line">    &lt;require Cclass=<span class="stringliteral">&quot;CMSIS&quot;</span> Cgroup=<span class="stringliteral">&quot;RTOS2&quot;</span>/&gt;</div>
<div class="line">  &lt;/condition&gt;</div>
<div class="line">&lt;/conditions&gt;</div>
</div><!-- fragment -->  </li>
<li>
Change the first line of the already existing <b>component</b> by adding the condition and increasing the version number of the component: <div class="fragment"><div class="line">&lt;component Cclass=<span class="stringliteral">&quot;MyClass&quot;</span> Cgroup=<span class="stringliteral">&quot;MyGroup&quot;</span> Csub=<span class="stringliteral">&quot;MySubGroup&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.1&quot;</span> condition=<span class="stringliteral">&quot;CMSIS Core with RTOS2&quot;</span>&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add the following code to the already existing <b>component</b>: <div class="fragment"><div class="line">&lt;file category=<span class="stringliteral">&quot;library&quot;</span> condition=<span class="stringliteral">&quot;CM0&quot;</span>     name=<span class="stringliteral">&quot;MySWComp/Lib/mylib_cm0.lib&quot;</span>/&gt;</div>
<div class="line">&lt;file category=<span class="stringliteral">&quot;library&quot;</span> condition=<span class="stringliteral">&quot;CM3&quot;</span>     name=<span class="stringliteral">&quot;MySWComp/Lib/mylib_cm3.lib&quot;</span>/&gt;</div>
<div class="line">&lt;file category=<span class="stringliteral">&quot;library&quot;</span> condition=<span class="stringliteral">&quot;CM4_CM7&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Lib/mylib_cm4.lib&quot;</span>/&gt;</div>
</div><!-- fragment --> Note that library files should always have a condition with regards to a specific C/C++ compiler. To accomplish this, each processor condition has the additional requirement for the Arm Compiler (version 6).  </li>
<li>
Add a new version number to the header of the PDSC file so that a Pack with a new version number will be created: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.1&quot;</span>&gt;</div>
<div class="line">  Conditions added</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Finally, save the PDSC file and regenerate the Pack file using the <b>gen_pack.sh</b> script. See <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">Generate a Pack</a> for further details. Afterwards, install the Pack in your development tool and observe the differences to version 1.0.0.</p>
<div class="image">
<img src="ConditionsDisplay.png" alt="ConditionsDisplay.png"/>
<div class="caption">
Display of conditionally added files for a Cortex-M3 device in development tools</div></div>
 </li>
</ol>
<h2><a class="anchor" id="cp_Variants"></a>
Variants</h2>
<p>Software components may have <b>variants</b>, for example:</p>
<ul>
<li>Debug version with or release version without diagnostic output</li>
<li>Long/short file names in a File System component</li>
<li>Fast/slow modes</li>
</ul>
<p>Variants are mutually exclusive (only one variant can be chosen at a time). <code>Cvariant</code> is an optional part of the component ID. The variant specifier is a brief string (e.g. <code>release</code>, <code>debug</code>).</p>
<dl class="section note"><dt>Note</dt><dd>Version management relies on variants to <b>remain unchanged between versions</b>.</dd></dl>
<p>The following example introduces a new component to the Pack in two variants: <code>debug</code> and <code>release</code>. Copy the <em>content</em> of the <b>03_Variants</b> directory of the <b>Pack_with_Software_Components.zip</b> file to the current working directory. </p>
<ol>
<li>
Add the following lines to the <b>components</b> section in your PDSC file: <div class="fragment"><div class="line">&lt;component Cclass=<span class="stringliteral">&quot;MyVariant&quot;</span> Cgroup=<span class="stringliteral">&quot;MyGroup&quot;</span> Cvariant=<span class="stringliteral">&quot;Release&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.2&quot;</span> condition=<span class="stringliteral">&quot;CMSIS Core with RTOS2&quot;</span>&gt;</div>
<div class="line">  &lt;description&gt;Release version of MyVariant&lt;/description&gt;</div>
<div class="line">  &lt;RTE_Components_h&gt;</div>
<div class="line">    &lt;!-- the following content goes into file <span class="stringliteral">&#39;RTE_Components.h&#39;</span> --&gt;</div>
<div class="line">    #define RTE_MyVariant_Release               <span class="comment">/* MyVariant Release Version */</span></div>
<div class="line">  &lt;/RTE_Components_h&gt;</div>
<div class="line">  &lt;files&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;doc&quot;</span> name=<span class="stringliteral">&quot;Docs/MySWComp.htm&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/header_mylib.h&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/config/config_mylib.h&quot;</span> attr=<span class="stringliteral">&quot;config&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/mylib_one.c&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/mylib_two.c&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;library&quot;</span> condition=<span class="stringliteral">&quot;CM0&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Lib/mylib_cm0.lib&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;library&quot;</span> condition=<span class="stringliteral">&quot;CM3&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Lib/mylib_cm3.lib&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;library&quot;</span> condition=<span class="stringliteral">&quot;CM4_CM7&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Lib/mylib_cm4.lib&quot;</span>/&gt;</div>
<div class="line">  &lt;/files&gt;</div>
<div class="line">&lt;/component&gt;</div>
<div class="line">&lt;component Cclass=<span class="stringliteral">&quot;MyVariant&quot;</span> Cgroup=<span class="stringliteral">&quot;MyGroup&quot;</span> Cvariant=<span class="stringliteral">&quot;Debug&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.2&quot;</span> condition=<span class="stringliteral">&quot;CMSIS Core with RTOS2&quot;</span>&gt;</div>
<div class="line">  &lt;description&gt;Debug version of MyVariant&lt;/description&gt;</div>
<div class="line">  &lt;RTE_Components_h&gt;</div>
<div class="line">    &lt;!-- the following content goes into file <span class="stringliteral">&#39;RTE_Components.h&#39;</span> --&gt;</div>
<div class="line">    #define RTE_MyVariant_Debug               <span class="comment">/* MyVariant Debug Version */</span></div>
<div class="line">  &lt;/RTE_Components_h&gt;</div>
<div class="line">  &lt;files&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;doc&quot;</span> name=<span class="stringliteral">&quot;Docs/MySWComp.htm&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/header_mylib.h&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/config/debug_config_mylib.h&quot;</span> attr=<span class="stringliteral">&quot;config&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/debug_mylib_one.c&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/debug_mylib_two.c&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;library&quot;</span> condition=<span class="stringliteral">&quot;CM0&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Lib/debug_mylib_cm0.lib&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;library&quot;</span> condition=<span class="stringliteral">&quot;CM3&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Lib/debug_mylib_cm3.lib&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;library&quot;</span> condition=<span class="stringliteral">&quot;CM4_CM7&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Lib/debug_mylib_cm4.lib&quot;</span>/&gt;</div>
<div class="line">  &lt;/files&gt;</div>
<div class="line">&lt;/component&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new revision to reflect the changes in a newly generated Pack: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.2&quot;</span>&gt;</div>
<div class="line">  Variants introduced</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Finally, save the PDSC file and regenerate the Pack file using the <b>gen_pack.sh</b> script. See <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">Generate a Pack</a> for further details. Afterwards, install the Pack in your development tool and observe the differences to version 1.0.1.</p>
<div class="image">
<img src="VariantDisplay.png" alt="VariantDisplay.png"/>
<div class="caption">
Display of MyVariant in development tools</div></div>
 </li>
</ol>
<h2><a class="anchor" id="cp_RTEComponents_h"></a>
RTE_Components.h</h2>
<p>Sometimes, software components need to know of other components. Depending on the availability or configuration of another component, certain settings may be required. A distinct header file is available to make components aware of each other: <b>RTE_Components.h</b>. To add a line of C code to this header file, simply add this to your component:</p>
<pre class="fragment">&lt;RTE_Components_h&gt;
  #define RTE_MyVariant_Debug               /* MyVariant Debug Version */
&lt;/RTE_Components_h&gt;
</pre><p> The <code>#define</code> can be checked by other components in a project.</p>
<dl class="section note"><dt>Note</dt><dd>The RTE_components.h file needs to be included somewhere in your source files. Refer to <a class="el" href="pdsc_components_pg.html#RTE_Components_h">RTE_Components.h</a> for more information.</dd></dl>
<h2><a class="anchor" id="cp_Bundles"></a>
Bundles</h2>
<p>A bundle is basically a variant on the <code>Cclass</code> level. It specifies the attributes <code>Cclass</code>, <code>Cversion</code> and optionally <code>Cgroup</code> and <code>Cvendor</code> for a collection of interdependent components. Components within a bundle inherit the attributes set by the bundle and must not set these attributes again. Bundles ensure consistency of attributes across multiple interworking components and restrict the mix and match of components within a <code>Cclass</code> from different solutions. In addition to components, a bundle has the mandatory elements <code>description</code> and <code>doc</code> (for documentation).</p>
<p>An example of a <b>bundle</b> is shown in the <a class="el" href="cp_PackTutorial.html#cp_BundleExample">Create a BSP Bundle</a> section where the bundle is used to deliver board support files for a certain development platform.</p>
<h2><a class="anchor" id="cp_Instances"></a>
Instances</h2>
<p>Some <a class="el" href="pdsc_components_pg.html">software components</a> allow several instances. For example, this is useful if more than one peripheral can be connected.</p>
<ol>
<li>
Adding the information about a maximum number of instances is easy. Change the first component (::MyClass:MyGroup:MySub) as follows: <div class="fragment"><div class="line">&lt;component Cclass=<span class="stringliteral">&quot;MyClass&quot;</span> Cgroup=<span class="stringliteral">&quot;MyGroup&quot;</span> Csub=<span class="stringliteral">&quot;MySubGroup&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.3&quot;</span> condition=<span class="stringliteral">&quot;CMSIS Core with RTOS2&quot;</span> maxInstances=<span class="stringliteral">&quot;3&quot;</span>&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new version number: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.3&quot;</span>&gt;</div>
<div class="line">  Maximum number of instances specified</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Finally, save the PDSC file and regenerate the Pack file using the <b>gen_pack.sh</b> script. See <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">Generate a Pack</a> for further details. Afterwards, install the Pack in your development tool and observe the differences to version 1.0.2. When selecting a certain number of instances of the component, causes the development tool to copy the required configuration files multiple times into the project. This ensures that each component instance can be configured separately.</p>
<div class="image">
<img src="maxInstancesDisplay.png" alt="maxInstancesDisplay.png"/>
<div class="caption">
Display of component instances in development tools</div></div>
 </li>
</ol>
<h2><a class="anchor" id="cp_API"></a>
API Interface</h2>
<p>An <a class="el" href="pdsc_apis_pg.html">API</a> is a special form of a software component that only defines a C/C++ Application Programming Interface (API). An API does not contain the actual implementation (usually provided by source code or library files) and cannot be selected in a development tool. An example is the CMSIS-RTOS v2 API, which is specified as part of CMSIS. However, the actual RTOS implementation is provided by different vendors. An API consists of a name, a brief description as well as one or more header files, and a document containing a detailed specification of the API.</p>
<p>Copy the <em>content</em> of the <b>05_APIs</b> directory of the <b>Pack_with_Software_Components.zip</b> file to the current working directory: </p>
<ol>
<li>
Add a <a class="el" href="pdsc_apis_pg.html">&lt;apis&gt;</a> section with the following: <div class="fragment"><div class="line">&lt;api Cclass=<span class="stringliteral">&quot;Device&quot;</span> Cgroup=<span class="stringliteral">&quot;MyAPI&quot;</span> exclusive=<span class="stringliteral">&quot;0&quot;</span>&gt;</div>
<div class="line">      &lt;description&gt;API <span class="keywordflow">for</span> MyAPI&lt;/description&gt;</div>
<div class="line">      &lt;files&gt;</div>
<div class="line">        &lt;file category=<span class="stringliteral">&quot;doc&quot;</span>    name=<span class="stringliteral">&quot;Docs/API/MyAPI.htm&quot;</span>/&gt;</div>
<div class="line">        &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;API/Include/MyAPI.h&quot;</span>/&gt;</div>
<div class="line">      &lt;/files&gt;</div>
<div class="line">    &lt;/api&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new version number: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.4&quot;</span>&gt;</div>
<div class="line">  MyAPI added</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
Finally, save the PDSC file and regenerate the Pack file using the <b>gen_pack.sh</b> script. See <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">Generate a Pack</a> for further details. Afterwards, install the Pack in your development tool and observe the differences to version 1.0.3. Most likely, you will see none as APIs are not selectable and are thus not displayed in the tools.  </li>
</ol>
<h2><a class="anchor" id="cp_CodeTemplates"></a>
User Code Templates</h2>
<p>User code templates provide a quick start for implementing an application. To add user code templates, add source files with the attribute <code>attr=âtemplateâ</code> in a <code>&lt;component&gt;</code>. The <code>select</code> attribute is used to identify template files. Template files with the same <code>select</code> attribute will be added to a project simultaneously.</p>
<p>Copy the <em>content</em> of the <b>06_User_Code_Templates</b> directory of the <b>Pack_with_Software_Components.zip</b> file to the current working directory: </p>
<ol>
<li>
Add the following code to both variants (<code>debug</code> and <code>release</code>) of the ::MyVariant:MyGroup component: <div class="fragment"><div class="line">&lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Templates/mylib_template1.c&quot;</span> attr=<span class="stringliteral">&quot;template&quot;</span> select=<span class="stringliteral">&quot;Easy Template&quot;</span>/&gt;</div>
<div class="line">&lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Templates/mylib_template2.c&quot;</span> attr=<span class="stringliteral">&quot;template&quot;</span> select=<span class="stringliteral">&quot;Complex Template&quot;</span>/&gt;</div>
<div class="line">&lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Templates/mylib_template3.c&quot;</span> attr=<span class="stringliteral">&quot;template&quot;</span> select=<span class="stringliteral">&quot;Complex Template&quot;</span>/&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new version number: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.5&quot;</span>&gt;</div>
<div class="line">  User Code Templates added</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Finally, save the PDSC file and regenerate the Pack file using the <b>gen_pack.sh</b> script. See <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">Generate a Pack</a> for further details. Afterwards, install the Pack in your development tool and observe the differences to version 1.0.4.</p>
<div class="image">
<img src="UserCodeTemplatesDisplay.png" alt="UserCodeTemplatesDisplay.png"/>
<div class="caption">
Display of user code templates in development tools</div></div>
 </li>
</ol>
<h2><a class="anchor" id="cp_Examples"></a>
Example Projects</h2>
<p>Example projects help to understand a certain MCU or development board better. An example and each individual file of it may refer to a condition that must resolve to true; if it is false, the example or file will be ignored. The board element is used to reference to one or more board descriptions using the board vendor and name an example is targeted for. Each example can specify attributes listing related components using <code>Cclass</code>, <code>Cgroup</code>, <code>Csub</code> and <code>Cversion</code>. The <b>&lt;project&gt;</b> element contains the names of the supported development tools and the project files to be loaded.</p>
<p>Adding example projects is an iterative process. First, you need to create the pack, so that you can create a project that is using the software components from the pack. Once this project is ready to be shipped, you can add it to the pack and publish it.</p>
<p>Copy the <em>content</em> of the <b>07_Example_Projects</b> directory of the <b>Pack_with_Software_Components.zip</b> file to the current working directory: </p>
<ol>
<li>
Add an <a class="el" href="pdsc_examples_pg.html">&lt;examples&gt;</a> section with the following: <div class="fragment"><div class="line">&lt;examples&gt;</div>
<div class="line">  &lt;example name=<span class="stringliteral">&quot;MyDevBoard Example&quot;</span> doc=<span class="stringliteral">&quot;Abstract.txt&quot;</span> folder=<span class="stringliteral">&quot;MyPackExample&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;CMSIS-RTOS based example&lt;/description&gt;</div>
<div class="line">    &lt;board name=<span class="stringliteral">&quot;MyDevBoard&quot;</span> vendor=<span class="stringliteral">&quot;MyVendor&quot;</span>/&gt;</div>
<div class="line">    &lt;project&gt;</div>
<div class="line">      &lt;environment name=<span class="stringliteral">&quot;uv&quot;</span> load=<span class="stringliteral">&quot;MyPackExample.uvprojx&quot;</span>/&gt;</div>
<div class="line">    &lt;/project&gt;</div>
<div class="line">    &lt;attributes&gt;</div>
<div class="line">      &lt;component Cclass=<span class="stringliteral">&quot;CMSIS&quot;</span>     Cgroup=<span class="stringliteral">&quot;Core&quot;</span>/&gt;</div>
<div class="line">      &lt;component Cclass=<span class="stringliteral">&quot;Device&quot;</span>    Cgroup=<span class="stringliteral">&quot;Startup&quot;</span>/&gt;</div>
<div class="line">      &lt;component Cclass=<span class="stringliteral">&quot;CMSIS&quot;</span>     Cgroup=<span class="stringliteral">&quot;RTOS&quot;</span>/&gt;</div>
<div class="line">      &lt;component Cclass=<span class="stringliteral">&quot;MyVariant&quot;</span> Cgroup=<span class="stringliteral">&quot;MyGroup&quot;</span>/&gt;</div>
<div class="line">    &lt;/attributes&gt;</div>
<div class="line">  &lt;/example&gt;</div>
<div class="line">&lt;/examples&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new version number: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.6&quot;</span>&gt;</div>
<div class="line">  Example project added</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Finally, save the PDSC file and regenerate the Pack file using the <b>gen_pack.sh</b> script. See <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">Generate a Pack</a> for further details. Afterwards, install the Pack in your development tool and observe the differences to version 1.0.5.</p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="packChk.html">PackChk</a> will issue a warning as the board described above is not known: <pre class="fragment">*** WARNING M324: C:\03_work\Packs\Arm\Tutorial\01_Create_PDSC\build\MyVendor.MyPack.pdsc (Line 116)
  Board referenced in Example 'MyDevBoard Example' not found: '[MyVendor] MyDevBoard'
</pre></dd></dl>
<div class="image">
<img src="ExampleDisplay.png" alt="ExampleDisplay.png"/>
<div class="caption">
Display of example projects in development tools</div></div>
 </li>
</ol>
<p>Example projects rely on a development board to be present (as the code needs to run on real hardware). In the code above you will notice that a development board called "MyDevBoard" was specified. <a class="el" href="cp_PackTutorial.html#createPackBoard">Pack with Board Support</a> explains how to integrate boards into a Pack.</p>
<h1><a class="anchor" id="createPack_DFP"></a>
Pack with Device Support</h1>
<p>A <a class="el" href="cp_PackTutorial.html#cp_SWComponents">Software Pack</a> that contains a <a class="el" href="pdsc_devices_pg.html">&lt;devices&gt;</a> element is called Device Family Pack (DFP). A DFP may contain additional <b>Software Components</b>, <b>Board</b>, <b>Example Projects</b>, or any combination of those. The typical content of a DFP is:</p>
<ul>
<li><a class="el" href="cp_PackTutorial.html#cp_DeviceProperties">Device Properties</a> explaining the capabilities of a device or a device family in more detail.</li>
<li><a class="el" href="cp_PackTutorial.html#cp_Components">Software Components</a> that configure the device and basic device drivers, in particular:<ul>
<li>CMSIS-compliant <a class="el" href="cp_PackTutorial.html#cp_System_Startup">System and Startup Files</a> required to setup the C run-time library, device clock, and memory interface.</li>
<li>Peripheral driver interfaces that provide software routines for physical device peripherals used by middleware stacks. Drivers may adhere to the <a href="https://arm-software.github.io/CMSIS_5/Driver/html/index.html" class="el" target="_blank">CMSIS-Driver</a> standard.</li>
</ul>
</li>
<li>One or more <a class="el" href="cp_PackTutorial.html#cp_SVD">System View Description (SVD)</a> files describing the programmer's view of the device's peripherals.</li>
<li><a class="el" href="cp_PackTutorial.html#cp_FlashProgrammingAlgorithm">Flash Programming Algorithms</a> for erasing and downloading code into on-chip flash.</li>
<li><a class="el" href="cp_PackTutorial.html#cp_debugdescription">Debug Descriptions</a> enable tool-agnostic debug and trace configurations.</li>
<li><a class="el" href="cp_PackTutorial.html#cp_Examples">Example Projects</a> that show the usage of the device and its peripherals.</li>
<li><a class="el" href="cp_PackTutorial.html#cp_CodeTemplates">User Code Templates</a> that can be used as a starting point for application development.</li>
</ul>
<p>This section explains how to create a DFP. Initially, the PDSC file in the DFP only describes devices. This DFP is then extended to contain also SVD files, flash algorithms, and device related software components such as system and HAL files. Example projects and code templates may be added as described in the section <a class="el" href="cp_PackTutorial.html#cp_SWComponents">Pack with Software Components</a>.</p>
<h2>DFP Use Cases </h2>
<p>A <a class="el" href="pdsc_devices_pg.html">Device Family Pack (DFP)</a> may be provided by a silicon vendor and is used to extend development tools with support for new devices. In general, the DFP enables silicon vendors to distribute tool independent device support for their device families.<br/>
DFPs can also be used to provide information for the display on web sites. One example is the new device database on <a href="https://developer.arm.com/embedded/cmsis/cmsis-packs/devices" class="el" target="_blank">developer.arm.com</a>:</p>
<p><a class="anchor" id="DevWebSite"></a></p>
<div class="image">
<img src="DeviceDatabase2.png" alt="DeviceDatabase2.png"/>
<div class="caption">
Device information on a web site extracted from a DFP</div></div>
 <h2>Steps to Create a DFP </h2>
<div class="image">
<img src="DFPFlow.png" alt="DFPFlow.png"/>
</div>
<h2><a class="anchor" id="cp_BasicDFP"></a>
Basic Device Family Pack</h2>
<p>In the following sections, a DFP will be created for a fictional device family called <b>MVCM3</b> from the device vendor <b>MyVendor</b>. The device family consists of four member that are separated into two sub-families. The specification of the MVCM3 family is as follows:</p>
<div class="image">
<img src="MVCM3SpecTable.png" alt="MVCM3SpecTable.png"/>
<div class="caption">
MVCM3 Device Family Specification</div></div>
<p> <b>Preparations</b></p>
<ol type="1">
<li>Create a working directory on you PC, for example <b>C:\temp\working_dfp</b>.</li>
<li>Go to the directory <b>\CMSIS\Pack\Tutorials</b> available in the <b>ARM::CMSIS</b> Pack installation. Please consult your development tool's documentation for more information on the Pack installation directory structure. In a standard ÂµVision installation, you will find it below <b>%localappdata%\Arm\Packs\ARM\CMSIS\<em>version</em></b>.</li>
<li>Open the file <b>Pack_with_Device_Support.zip</b>.</li>
<li>Copy the file <b>MyVendor.MVCM3.pdsc</b> of the ZIP file's <b>01_Basic_Pack</b> directory into your working directory.</li>
<li>Make sure that file are not write protected (remove read-only flag).</li>
<li>Copy the <a class="el" href="bash_script.html">gen_pack.sh</a> script from your CMSIS-Pack installation's <b>\CMSIS\Pack\Bash</b> directory to the working directory.</li>
<li>Open the <b>MyVendor.MVCM3.pdsc</b> file in an editor.</li>
</ol>
<p><b>Code Example</b> </p>
<ol>
<li>
Add a <a class="el" href="pdsc_family_pg.html#element_device">&lt;devices&gt;</a> section in the PDSC file with the following: <div class="fragment"><div class="line">&lt;devices&gt;</div>
<div class="line">  &lt;family Dfamily=<span class="stringliteral">&quot;MVCM3 Series&quot;</span> Dvendor=<span class="stringliteral">&quot;Generic:5&quot;</span>&gt;</div>
<div class="line">    &lt;processor Dcore=<span class="stringliteral">&quot;Cortex-M3&quot;</span> DcoreVersion=<span class="stringliteral">&quot;r2p1&quot;</span> Dfpu=<span class="stringliteral">&quot;0&quot;</span> Dmpu=<span class="stringliteral">&quot;0&quot;</span> Dendian=<span class="stringliteral">&quot;Little-endian&quot;</span>/&gt;</div>
<div class="line">    &lt;description&gt;</div>
<div class="line">      The MVCM3 device family contains an Arm Cortex-M3 processor, running up to 100 MHz with a versatile set of on-chip peripherals.</div>
<div class="line">    &lt;/description&gt;</div>
<div class="line">    &lt;!-- ************************  Sub-family <span class="stringliteral">&#39;MVCM3100&#39;</span>  **************************** --&gt;</div>
<div class="line">    &lt;subFamily DsubFamily=<span class="stringliteral">&quot;MVCM3100&quot;</span>&gt;</div>
<div class="line">      &lt;processor  Dclock=<span class="stringliteral">&quot;50000000&quot;</span>/&gt;</div>
<div class="line">      &lt;!-- *************************  Device <span class="stringliteral">&#39;MVCM3110&#39;</span>  ***************************** --&gt;</div>
<div class="line">      &lt;device Dname=<span class="stringliteral">&quot;MVCM3110&quot;</span>&gt;</div>
<div class="line">        &lt;memory     name=<span class="stringliteral">&quot;IROM1&quot;</span>  access=<span class="stringliteral">&quot;rx&quot;</span>       start=<span class="stringliteral">&quot;0x00000000&quot;</span>  size=<span class="stringliteral">&quot;0x4000&quot;</span>     startup=<span class="stringliteral">&quot;1&quot;</span>   <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">        &lt;memory     name=<span class="stringliteral">&quot;IRAM1&quot;</span>  access=<span class="stringliteral">&quot;rw&quot;</span>       start=<span class="stringliteral">&quot;0x20000000&quot;</span>  size=<span class="stringliteral">&quot;0x0800&quot;</span>     init   =<span class="stringliteral">&quot;0&quot;</span>   <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">      &lt;/device&gt;</div>
<div class="line">      &lt;!-- *************************  Device <span class="stringliteral">&#39;MVCM3120&#39;</span>  ***************************** --&gt;</div>
<div class="line">      &lt;device Dname=<span class="stringliteral">&quot;MVCM3120&quot;</span>&gt;</div>
<div class="line">        &lt;memory     name=<span class="stringliteral">&quot;IROM1&quot;</span>  access=<span class="stringliteral">&quot;rx&quot;</span>        start=<span class="stringliteral">&quot;0x00000000&quot;</span>  size=<span class="stringliteral">&quot;0x8000&quot;</span>     startup=<span class="stringliteral">&quot;1&quot;</span>   <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">        &lt;memory     name=<span class="stringliteral">&quot;IRAM1&quot;</span>  access=<span class="stringliteral">&quot;rx&quot;</span>        start=<span class="stringliteral">&quot;0x20000000&quot;</span>  size=<span class="stringliteral">&quot;0x1000&quot;</span>     init   =<span class="stringliteral">&quot;0&quot;</span>   <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">      &lt;/device&gt;</div>
<div class="line">    &lt;/subFamily&gt;</div>
<div class="line">    &lt;!-- ************************  Sub Family <span class="stringliteral">&#39;MVCM3200&#39;</span>  **************************** --&gt;</div>
<div class="line">    &lt;subFamily DsubFamily=<span class="stringliteral">&quot;MVCM3200&quot;</span>&gt;</div>
<div class="line">      &lt;processor  Dclock=<span class="stringliteral">&quot;100000000&quot;</span>/&gt;</div>
<div class="line">      &lt;!-- *************************  Device <span class="stringliteral">&#39;MVCM3250&#39;</span>  ***************************** --&gt;</div>
<div class="line">      &lt;device Dname=<span class="stringliteral">&quot;MVCM3250&quot;</span>&gt;</div>
<div class="line">        &lt;memory     name=<span class="stringliteral">&quot;IROM1&quot;</span>  access=<span class="stringliteral">&quot;rx&quot;</span>         start=<span class="stringliteral">&quot;0x00000000&quot;</span>  size=<span class="stringliteral">&quot;0x4000&quot;</span>     startup=<span class="stringliteral">&quot;1&quot;</span>   <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">        &lt;memory     name=<span class="stringliteral">&quot;IRAM1&quot;</span>  access=<span class="stringliteral">&quot;rw&quot;</span>         start=<span class="stringliteral">&quot;0x20000000&quot;</span>  size=<span class="stringliteral">&quot;0x0800&quot;</span>     init   =<span class="stringliteral">&quot;0&quot;</span>   <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">      &lt;/device&gt;</div>
<div class="line">      &lt;!-- *************************  Device <span class="stringliteral">&#39;MVCM3260&#39;</span>  ***************************** --&gt;</div>
<div class="line">      &lt;device Dname=<span class="stringliteral">&quot;MVCM3260&quot;</span>&gt;</div>
<div class="line">        &lt;memory     name=<span class="stringliteral">&quot;IROM1&quot;</span>  access=<span class="stringliteral">&quot;rx&quot;</span>         start=<span class="stringliteral">&quot;0x00000000&quot;</span>  size=<span class="stringliteral">&quot;0x8000&quot;</span>     startup=<span class="stringliteral">&quot;1&quot;</span>   <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">        &lt;memory     name=<span class="stringliteral">&quot;IRAM1&quot;</span>  access=<span class="stringliteral">&quot;rw&quot;</span>         start=<span class="stringliteral">&quot;0x20000000&quot;</span>  size=<span class="stringliteral">&quot;0x1000&quot;</span>     init   =<span class="stringliteral">&quot;0&quot;</span>   <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">      &lt;/device&gt;</div>
<div class="line">    &lt;/subFamily&gt;</div>
<div class="line">  &lt;/family&gt;</div>
<div class="line">&lt;/devices&gt;</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><ul>
<li><code>Dvendor</code> IDs are not freely selectable. The very latest set of IDs can be found in the <a href="https://github.com/ARM-software/CMSIS_5/blob/develop/CMSIS/Utilities/PACK.xsd" target="_blank">PACK.xsd</a> file on GitHub. If you are a new device vendor, please contact <a href="#" onclick="location.href='mai'+'lto:'+'cms'+'is'+'@ar'+'m.'+'com'+'?s'+'ubj'+'ec'+'t=D'+'ve'+'ndo'+'r%'+'20I'+'D%'+'20A'+'ss'+'ign'+'me'+'nt'; return false;">cmsis@arm.com</a> to get a <code>Dvendor</code> ID assigned.</li>
<li>This section's code examples can be found in the <code>snippets.xml</code> file in the ZIP file's <b>01_Basic_Pack</b> directory.</li>
<li>Usually, you need to add a <code>&lt;date&gt;</code> tag to a <code>&lt;release</code> <code>version&gt;</code>. If you omit this, <a class="el" href="packChk.html">PackChk</a> will issue a warning. To keep the tutorial simple, the <code>&lt;date&gt;</code> tag is not used here (as it requires consecutive dates for different versions).</li>
</ul>
</dd></dl>
</li>
<li>
Open <a class="el" href="bash_script.html">gen_pack.sh</a> from your working directory in an editor. Modify the variables <code>CMSIS_PACK_PATH</code> and <code>PATH_TO_ADD</code> reflect your setup. The following is an example for a Git Bash on Windows: <div class="fragment"><div class="line">CMSIS_PACK_PATH=<span class="stringliteral">&quot;$LOCALAPPDATA/Arm/Packs/ARM/CMSIS/5.7.0&quot;</span></div>
<div class="line">PATH_TO_ADD=<span class="stringliteral">&quot;/C/Program Files/7-Zip/:$CMSIS_PACK_PATH/CMSIS/Utilities/Win32/:/C/xmllint/&quot;</span></div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Refer to section <a class="el" href="createPackUtil.html">Utilities for Creating Packs</a> for hints on how to install the required tools.  </dd></dl>
</li>
<li>
From the <code>PACK_BASE_FILES</code> variable, delete <code>License.txt</code> and <code>README.md</code>. We don't use them in this tutorial.  </li>
<li>
Having saved <b>gen_pack.sh</b>, open a Bash console in the current directory and run the script. The shell script will:<ul>
<li>Run a schema check on the PDSC file using <a class="el" href="cp_Editors.html">xmllint</a>.</li>
<li>Run <a class="el" href="packChk.html">PackChk</a></li>
<li>Create the <b>MyVendor.MVCM3.1.0.0.pack</b> Pack file in the ./output sub-directory.  </li>
</ul>
</li>
<li>
<a class="el" href="packChk.html">PackChk</a> will issue a couple of warnings that we will take care of later: <pre class="fragment">*** WARNING M350: C:\03_work\Packs\Arm\Tutorial\DFP\working\build\MyVendor.MVCM3.pdsc (Line 35)
  No 'Startup' component found for [Generic:5] 'MVCM3110' (Compiler:  [])

*** WARNING M350: C:\03_work\Packs\Arm\Tutorial\DFP\working\build\MyVendor.MVCM3.pdsc (Line 35)
  No 'Startup' component found for [Generic:5] 'MVCM3120' (Compiler:  [])

*** WARNING M350: C:\03_work\Packs\Arm\Tutorial\DFP\working\build\MyVendor.MVCM3.pdsc (Line 49)
  No 'Startup' component found for [Generic:5] 'MVCM3250' (Compiler:  [])

*** WARNING M350: C:\03_work\Packs\Arm\Tutorial\DFP\working\build\MyVendor.MVCM3.pdsc (Line 49)
  No 'Startup' component found for [Generic:5] 'MVCM3260' (Compiler:  [])
</pre>  </li>
<li>
<p class="startli">Install the Pack in your development tool by double-clicking it. Your pack management tool should show something similar to this:</p>
<div class="image">
<img src="BasicDFPDisplay.png" alt="BasicDFPDisplay.png"/>
<div class="caption">
Display of microcontroller devices in development tools</div></div>
 </li>
</ol>
<h2><a class="anchor" id="cp_System_Startup"></a>
System and Startup Files</h2>
<p><a href="../../Core/html/index.html">CMSIS-Core (Cortex-M)</a> defines the following files to be used by an embedded application:</p>
<ul>
<li><code>startup_&lt;device&gt;.c</code> with reset handler and exception vectors. It is executed after reset and calls <code>SystemInit</code> and may contain stack and heap configurations for the user application.</li>
<li><code>system_&lt;device&gt;.c</code> and <code>system_&lt;device&gt;.h</code> with general system configuration information (i.e. for clock and bus setup).</li>
<li><code>&lt;device.h&gt;</code> gives access to processor core and all peripherals. This file should be generated out of the <a class="el" href="cp_PackTutorial.html#cp_SVD">SVD</a> file using <a href="../../SVD/html/svd_SVDConv_pg.html"><b>SVDConv.exe</b></a> to ensure consistency between the header file and what is being displayed by the debugger.</li>
</ul>
<div class="image">
<img src="SystemStartupFiles.png" alt="SystemStartupFiles.png"/>
<div class="caption">
System and startup files in relation to user code</div></div>
 <dl class="section note"><dt>Note</dt><dd><a href="../../Core/html/templates_pg.html"><b>CMSIS-Core(M)</b></a> explains the structure of the system and startup files and how to create them.</dd></dl>
<p>Copy the <em>content</em> of the <b>02_System_and_Startup</b> directory of the <b>Pack_with_Device_Support.zip</b> file to the current working directory: </p>
<ol>
<li>
Add a <code>&lt;conditions&gt;</code> section in your PDSC with the following (the <a class="el" href="cp_PackTutorial.html#cp_Conditions">conditions</a> section provides more information on this step): <div class="fragment"><div class="line">&lt;conditions&gt;</div>
<div class="line">  &lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;MVCM3 CMSIS-CORE&quot;</span>&gt;</div>
<div class="line">    &lt;!-- conditions selecting Devices --&gt;</div>
<div class="line">    &lt;description&gt;MyVendor MVCM3 Series devices and CMSIS-CORE&lt;/description&gt;</div>
<div class="line">    &lt;require Cclass=<span class="stringliteral">&quot;CMSIS&quot;</span> Cgroup=<span class="stringliteral">&quot;CORE&quot;</span>/&gt;</div>
<div class="line">    &lt;require Dvendor=<span class="stringliteral">&quot;Generic:5&quot;</span> Dname=<span class="stringliteral">&quot;MVCM3*&quot;</span>/&gt;</div>
<div class="line">  &lt;/condition&gt;</div>
<div class="line">  &lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;Startup Arm&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;Startup assembler file <span class="keywordflow">for</span> Arm Compiler 6&lt;/description&gt;</div>
<div class="line">    &lt;require Tcompiler=<span class="stringliteral">&quot;ARMCC&quot;</span> Toptions=<span class="stringliteral">&quot;AC6&quot;</span>/&gt;</div>
<div class="line">  &lt;/condition&gt;</div>
<div class="line">  &lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;Startup GCC&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;Startup assembler file <span class="keywordflow">for</span> GCC&lt;/description&gt;</div>
<div class="line">    &lt;require Tcompiler=<span class="stringliteral">&quot;GCC&quot;</span>/&gt;</div>
<div class="line">  &lt;/condition&gt;</div>
<div class="line">  &lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;Startup IAR&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;Startup assembler file <span class="keywordflow">for</span> IAR&lt;/description&gt;</div>
<div class="line">    &lt;require Tcompiler=<span class="stringliteral">&quot;IAR&quot;</span>/&gt;</div>
<div class="line">  &lt;/condition&gt;</div>
<div class="line">&lt;/conditions&gt;</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The assembler based <code>startup_&lt;device&gt;.s</code> file is tool dependent. Therefore, separate conditions for the various tool vendors are required.  </dd></dl>
</li>
<li>
Add a <code>&lt;components&gt;</code> section in your PDSC with the following (the <a class="el" href="cp_PackTutorial.html#cp_Components">components</a> section provides more information on this step): <div class="fragment"><div class="line">&lt;components&gt;</div>
<div class="line">  &lt;component Cclass=<span class="stringliteral">&quot;Device&quot;</span> Cgroup=<span class="stringliteral">&quot;Startup&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.0&quot;</span> condition=<span class="stringliteral">&quot;MVCM3 CMSIS-CORE&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;System Startup <span class="keywordflow">for</span> MyVendor MVCM3 Series&lt;/description&gt;</div>
<div class="line">    &lt;files&gt;</div>
<div class="line">      &lt;!--  include folder --&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;include&quot;</span> name=<span class="stringliteral">&quot;Device/Include/&quot;</span>/&gt;</div>
<div class="line"></div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;linkerScript&quot;</span>  name=<span class="stringliteral">&quot;Device/Source/Arm/MVCM3xxx_ac6.sct&quot;</span> attr=<span class="stringliteral">&quot;config&quot;</span> condition=<span class="stringliteral">&quot;Startup Arm&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;linkerScript&quot;</span>  name=<span class="stringliteral">&quot;Device/Source/GCC/MVCM3xxx_gcc.ld&quot;</span>  attr=<span class="stringliteral">&quot;config&quot;</span> condition=<span class="stringliteral">&quot;Startup GCC&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;</div>
<div class="line"></div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;Device/Source/startup_MVCM3xxx.c&quot;</span> attr=<span class="stringliteral">&quot;config&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;Device/Source/system_MVCM3xxx.c&quot;</span>  attr=<span class="stringliteral">&quot;config&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;</div>
<div class="line">    &lt;/files&gt;</div>
<div class="line">  &lt;/component&gt;</div>
<div class="line">&lt;/components&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new version number: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.1&quot;</span>&gt;</div>
<div class="line">  Startup files included</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Finally, save the PDSC file and regenerate the Pack file using the <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">gen_pack.sh</a> script. Afterwards, install the Pack in your development tool and create a new project. Select the software components <b>::CMSIS:CORE</b> and <b>::Device:Startup</b> for the project:</p>
<div class="image">
<img src="StartupSystemFilesAdded.png" alt="StartupSystemFilesAdded.png"/>
<div class="caption">
Startup and system files added to a project</div></div>
 </li>
</ol>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="packChk.html">PackChk</a> will show lots of <code>INFO</code> messages. This is expected at this point and we will address this problem in the next section.</dd></dl>
<h2><a class="anchor" id="cp_SVD"></a>
System View Description File</h2>
<p><a href="https://www.keil.com/cmsis/svd" class="el" target="_blank">CMSIS-SVD</a> formalizes the description of the programmer's view for the system contained in ARM Cortex-M processor-based microcontrollers, in particular the memory mapped registers of the peripherals. The level of detail contained in system view descriptions is comparable to what is found in device reference manuals published by silicon vendors. The information ranges from a high level functional description of a peripheral all the way down to the definition and purpose of an individual bit field in a memory mapped register. CMSIS-SVD files are developed and maintained by the silicon vendors. The XML based SVD file is the input for <a href="../../SVD/html/svd_SVDConv_pg.html"><b>SVDConv.exe</b></a> that generates the tool dependent debug view and the device header file.</p>
<div class="image">
<img src="SVDFlow.png" alt="SVDFlow.png"/>
<div class="caption">
SVD file conversion flow</div></div>
<p> Copy the <em>content</em> of the <b>03_SVD_File</b> directory of the <b>Pack_with_Device_Support.zip</b> file to the current working directory: </p>
<ol>
<li>
In your currently open Bash shell, run the following commands: <pre class="fragment">$ cd SVD
$ /c/Users/username/AppData/Local/Arm/Packs/ARM/CMSIS/5.7.0/CMSIS/Utilities/Win32/SVDConv.exe MVCM3xxx.svd --generate=header --fields=macro
</pre>  </li>
<li>
You should see some output of SVDConv similar to this: <pre class="fragment">CMSIS-SVD SVD Consistency Checker / Header File Generator V3.3.35
Copyright (C) 2010 - 2020 ARM Ltd and ARM Germany GmbH. All rights reserved.

Arguments: "MVCM3xxx.svd" --generate=header --fields=macro

Found 0 Error(s) and 0 Warning(s).
</pre>  </li>
<li>
Move the generated header file <b>MVCM3xxx.h</b> to the <b>Device\Include</b> directory.  </li>
<li>
Add the following two lines at the family level in the PDSC file: <div class="fragment"><div class="line">&lt;compile    header=<span class="stringliteral">&quot;Device/Include/MVCM3xxx.h&quot;</span>/&gt;</div>
<div class="line">&lt;debug      svd=<span class="stringliteral">&quot;SVD/MVCM3xxx.svd&quot;</span>/&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new version number: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.2&quot;</span>&gt;</div>
<div class="line">  SVD and header file included</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Finally, save the PDSC file and regenerate the Pack file using the <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">gen_pack.sh</a> script. Afterwards, install the Pack in your development tool and create a new project. Depending on your development environment, you will be able to see the SVD file included in your project:</p>
<div class="image">
<img src="SVDIncluded.png" alt="SVDIncluded.png"/>
<div class="caption">
Project with SVD file</div></div>
 <dl class="section note"><dt>Note</dt><dd>For more information on SVD, please visit <a href="../../SVD/html/index.html" class="el">CMSIS-SVD</a>.  </dd></dl>
</li>
</ol>
<h2><a class="anchor" id="cp_FlashProgrammingAlgorithm"></a>
Flash Programming Algorithms</h2>
<p><a class="el" href="flashAlgorithm.html">Flash Programming</a> are used to erase or download applications to Flash devices. A DFP usually contains predefined Flash algorithms for programming its supported devices. The page <a class="el" href="algorithmFunc.html">Algorithm Functions</a> explains the mechanisms in more detail.</p>
<p>For the MVCM3 device family, two flash algorithms have to be created. MVCM3110/250 have 16 kB of Flash, whereas MVCM3120/260 have 32 kB of Flash memory.</p>
<p>Copy the <em>content</em> of the <b>04_Flash_Programming</b> directory of the <b>Pack_with_Device_Support.zip</b> file to the current working directory: </p>
<ol>
<li>
In the PDSC file, add these lines to the MVCM3110/250 device sections: <div class="fragment"><div class="line">&lt;algorithm name=<span class="stringliteral">&quot;Flash/MVCM3XXX_16.FLM&quot;</span> start=<span class="stringliteral">&quot;0x00000000&quot;</span> size=<span class="stringliteral">&quot;0x4000&quot;</span> <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add these lines to the MVCM3120/260 device sections: <div class="fragment"><div class="line">&lt;algorithm name=<span class="stringliteral">&quot;Flash/MVCM3XXX_32.FLM&quot;</span> start=<span class="stringliteral">&quot;0x00000000&quot;</span> size=<span class="stringliteral">&quot;0x8000&quot;</span> <span class="keywordflow">default</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new version number: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.3&quot;</span>&gt;</div>
<div class="line">  Flash Programming Algorithms added</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Finally, save the PDSC file and regenerate the Pack file using the <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">gen_pack.sh</a> script. Afterwards, install the Pack in your development tool. Depending on your development environment, you will be able to see the Flash Programming Algorithms included in your project (either for a new project or by adding it manually to an existing project):</p>
<div class="image">
<img src="FPADisplay.png" alt="FPADisplay.png"/>
<div class="caption">
Display of Flash Programming Algorithm</div></div>
 <dl class="section note"><dt>Note</dt><dd>The page <a class="el" href="flashAlgorithm.html">Flash Programming</a> gives more information on the subject.  </dd></dl>
</li>
</ol>
<h2><a class="anchor" id="cp_debugdescription"></a>
Debug Descriptions</h2>
<p>Please refer to <a class="el" href="dbg_setup_tutorial.html">Debug Setup Tutorial</a> for more information. In this tutorial, we will skip the creation of debug descriptions.</p>
<h2><a class="anchor" id="cp_DeviceProperties"></a>
Device Properties</h2>
<p>To limit redundancy, devices can be organized in two hierarchy groups:</p>
<ul>
<li><a class="el" href="pdsc_family_pg.html#element_family">family</a>: the attributes of a device family which includes also the processor.</li>
<li><a class="el" href="pdsc_family_pg.html#element_subFamily">subFamily</a>: attributes of an optional sub-family; this adds or modifies features of a family.</li>
</ul>
<p>Parameters of each single device are defined in:</p>
<ul>
<li><a class="el" href="pdsc_family_pg.html#element_device">device</a>: attributes of a specific silicon device</li>
<li><a class="el" href="pdsc_family_pg.html#element_variant">variant</a>: attributes of a device variant (for example, with different package or temperature range) or an OEM device or board that integrates the device.</li>
</ul>
<p>A device is described by the following properties:</p>
<ul>
<li><a class="el" href="pdsc_family_pg.html#element_description">description</a>: textual device description</li>
<li><a class="el" href="pdsc_family_pg.html#element_feature">feature</a>: categorized list of device peripherals and features. This list is used on <a class="el" href="cp_PackTutorial.html#DevWebSite">web sites</a> for the display of device features.</li>
<li><a class="el" href="pdsc_family_pg.html#element_book">book</a>: documentation about the device and its processor(s)</li>
<li><a class="el" href="pdsc_family_pg.html#element_processor">processor</a>: processor and processor features embedded in the device</li>
<li><a class="el" href="pdsc_family_pg.html#element_compile">compile</a>: device specific general settings for the build tools</li>
<li><a class="el" href="pdsc_family_pg.html#element_debugconfig">debugconfig</a>: default settings for a debug connection</li>
<li><a class="el" href="pdsc_family_pg.html#element_debugport">debugport</a>: debug port description of the device for the debugger to configure a debug connection.</li>
<li><a class="el" href="pdsc_family_pg.html#element_accessportV1">accessportV1</a>: access port (APv1) description of the device for the debugger to configure a debug connection.</li>
<li><a class="el" href="pdsc_family_pg.html#element_accessportV2">accessportV2</a>: access port (APv2) description of the device for the debugger to configure a debug connection.</li>
<li><a class="el" href="pdsc_family_pg.html#element_debug">debug</a>: device specific information for the debugger to configure a debug connection including System View Description files.</li>
<li><a class="el" href="pdsc_family_pg.html#element_trace">trace</a>: device specific information for the debugger to configure trace.</li>
<li><a class="el" href="pdsc_family_pg.html#element_memory">memory</a>: memory layout of the device for internal and external RAM and ROM regions</li>
<li><a class="el" href="pdsc_family_pg.html#element_algorithm">algorithm</a>: device specific Flash programming algorithms</li>
</ul>
<p>A device inherits all specifications from both the family and sub-family levels. Some properties are required to be unique. For example, the name of the SVD file attribute of the <b>&lt;debug&gt;</b> property. Therefore, the SVD file specified on the family level can be redefined by the attribute on the sub-family or device level. Other information like the &lt;description&gt; and &lt;feature&gt; entries are adding up, starting with the information from the family and sub-family level and finalizing with the information on the device level.</p>
<p>The following shows how to specify the device properties for the MVCM3110 device (refer to the specification shown in <a class="el" href="cp_PackTutorial.html#cp_BasicDFP">Basic Device Family Pack</a>). The other members of the family are specified accordingly.</p>
<p>Copy the <em>content</em> of the <b>05_Device_Properties</b> directory of the <b>Pack_with_Device_Support.zip</b> file to the current working directory: </p>
<ol>
<li>
The <b>MVCM3 Series</b> family properties <a class="el" href="pdsc_family_pg.html#element_processor">processor</a>, <a class="el" href="pdsc_family_pg.html#element_compile">compile</a>, <a class="el" href="pdsc_family_pg.html#element_description">description</a>, and <a class="el" href="pdsc_family_pg.html#element_debug">debug</a> are already specified. There are additional common properties that can be specified on the family level: <a class="el" href="pdsc_family_pg.html#element_book">book</a> and <a class="el" href="pdsc_family_pg.html#element_feature">feature</a>. Add the following lines to the PDSC file in the <b>&lt;family&gt;</b> section: <div class="fragment"><div class="line">&lt;book      name=<span class="stringliteral">&quot;Docs/dui0552a_cortex_m3_dgug.pdf&quot;</span>   title=<span class="stringliteral">&quot;Cortex-M3 Generic User Guide&quot;</span>/&gt;</div>
<div class="line">&lt;book      name=<span class="stringliteral">&quot;Docs/MVCM3XXX_Datasheet.pdf&quot;</span>        title=<span class="stringliteral">&quot;MVCM3 Series Datasheet&quot;</span>/&gt;</div>
<div class="line">&lt;book      name=<span class="stringliteral">&quot;Docs/MVCM3XXX_Product_Brief.pdf&quot;</span>    title=<span class="stringliteral">&quot;MVCM3 Product Brief&quot;</span>/&gt;</div>
<div class="line">&lt;feature type=<span class="stringliteral">&quot;ExtInt&quot;</span>        n=<span class="stringliteral">&quot;16&quot;</span>/&gt;</div>
<div class="line">&lt;feature type=<span class="stringliteral">&quot;Temp&quot;</span>          n=<span class="stringliteral">&quot;-40&quot;</span>     m=<span class="stringliteral">&quot;105&quot;</span>   name=<span class="stringliteral">&quot;Extended Temperature Range&quot;</span>/&gt;</div>
<div class="line">&lt;feature type=<span class="stringliteral">&quot;VCC&quot;</span>           n=<span class="stringliteral">&quot;2.5&quot;</span>     m=<span class="stringliteral">&quot;3.6&quot;</span>/&gt;</div>
<div class="line">&lt;feature type=<span class="stringliteral">&quot;RTC&quot;</span>           n=<span class="stringliteral">&quot;32768&quot;</span>/&gt;</div>
<div class="line">&lt;feature type=<span class="stringliteral">&quot;WDT&quot;</span>           n=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
</div><!-- fragment -->  </li>
<li>
The <b>MVCM31xx</b> sub-family has some features that are common for the two member devices. Please add the following code to the MVCM31100 <b>&lt;subFamily&gt;</b> section: <div class="fragment"><div class="line">&lt;feature type=<span class="stringliteral">&quot;IOs&quot;</span>           n=<span class="stringliteral">&quot;26&quot;</span>/&gt;</div>
<div class="line">&lt;feature type=<span class="stringliteral">&quot;I2C&quot;</span>           n=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">&lt;feature type=<span class="stringliteral">&quot;UART&quot;</span>          n=<span class="stringliteral">&quot;4&quot;</span>/&gt;</div>
<div class="line">&lt;feature type=<span class="stringliteral">&quot;Timer&quot;</span>         n=<span class="stringliteral">&quot;6&quot;</span>       m=<span class="stringliteral">&quot;32&quot;</span>/&gt;</div>
<div class="line">&lt;feature type=<span class="stringliteral">&quot;QFP&quot;</span>           n=<span class="stringliteral">&quot;32&quot;</span>/&gt;</div>
</div><!-- fragment -->  </li>
<li>
The <b>MVCM3110</b> device has some features that are unique to that device. Please add the following code to the MVCM3110 <b>&lt;device&gt;</b> section: <div class="fragment"><div class="line">&lt;feature    type=<span class="stringliteral">&quot;PWM&quot;</span>           n=<span class="stringliteral">&quot;2&quot;</span> m=<span class="stringliteral">&quot;16&quot;</span>/&gt;</div>
</div><!-- fragment -->  </li>
</ol>
<h2><a class="anchor" id="cp_DeviceSWComp"></a>
Device Specific Software Components</h2>
<p>Finally, <a class="el" href="cp_PackTutorial.html#cp_Components">software components</a> and <a class="el" href="cp_PackTutorial.html#cp_Examples">example projects</a> need to be added to the DFP. </p>
<ol>
<li>
Add the following lines to the PDSC file in the <b>&lt;components&gt;</b> section: <div class="fragment"><div class="line">&lt;component Cclass=<span class="stringliteral">&quot;Device&quot;</span> Cgroup=<span class="stringliteral">&quot;HAL&quot;</span> Csub=<span class="stringliteral">&quot;GPIO&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.0&quot;</span> condition=<span class="stringliteral">&quot;MVCM3 CMSIS-Core&quot;</span>&gt;</div>
<div class="line">  &lt;description&gt;GPIO HAL <span class="keywordflow">for</span> MyVendor MVCM3 Series&lt;/description&gt;</div>
<div class="line">  &lt;files&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;Device/Include/GPIO.h&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;Device/Source/GPIO.c&quot;</span>/&gt;</div>
<div class="line">  &lt;/files&gt;</div>
<div class="line">&lt;/component&gt;</div>
<div class="line"></div>
<div class="line">&lt;component Cclass=<span class="stringliteral">&quot;Device&quot;</span> Cgroup=<span class="stringliteral">&quot;HAL&quot;</span> Csub=<span class="stringliteral">&quot;ADC&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.0&quot;</span> condition=<span class="stringliteral">&quot;MVCM3 CMSIS-Core&quot;</span>&gt;</div>
<div class="line">  &lt;description&gt;ADC HAL <span class="keywordflow">for</span> MyVendor MVCM3 Series&lt;/description&gt;</div>
<div class="line">  &lt;files&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;Device/Include/ADC.h&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;Device/Source/ADC.c&quot;</span>/&gt;</div>
<div class="line">  &lt;/files&gt;</div>
<div class="line">&lt;/component&gt;</div>
<div class="line"></div>
<div class="line">&lt;component Cclass=<span class="stringliteral">&quot;CMSIS Driver&quot;</span> Cgroup=<span class="stringliteral">&quot;I2C&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.0&quot;</span> condition=<span class="stringliteral">&quot;MVCM3 CMSIS-Core&quot;</span> maxInstances=<span class="stringliteral">&quot;3&quot;</span>&gt;</div>
<div class="line">  &lt;description&gt;I2C Driver <span class="keywordflow">for</span> MVCM3 Series&lt;/description&gt;</div>
<div class="line">  &lt;RTE_Components_h&gt;</div>
<div class="line"><span class="preprocessor">    #define RTE_Drivers_I2C0                </span><span class="comment">/* Driver I2C0 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #define RTE_Drivers_I2C1                </span><span class="comment">/* Driver I2C1 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #define RTE_Drivers_I2C2                </span><span class="comment">/* Driver I2C2 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>  &lt;/RTE_Components_h&gt;</div>
<div class="line">  &lt;files&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;Drivers/I2C/I2C_MVCM3.c&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;Drivers/I2C/I2C_MVCM3.h&quot;</span>/&gt;</div>
<div class="line">  &lt;/files&gt;</div>
<div class="line">&lt;/component&gt;</div>
<div class="line"></div>
<div class="line">&lt;component Cclass=<span class="stringliteral">&quot;CMSIS Driver&quot;</span> Cgroup=<span class="stringliteral">&quot;UART&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.0&quot;</span> condition=<span class="stringliteral">&quot;MVCM3 CMSIS-Core&quot;</span> maxInstances=<span class="stringliteral">&quot;5&quot;</span>&gt;</div>
<div class="line">  &lt;description&gt;UART Driver <span class="keywordflow">for</span> MVCM3 Series&lt;/description&gt;</div>
<div class="line">  &lt;RTE_Components_h&gt;</div>
<div class="line"><span class="preprocessor">    #define RTE_Drivers_UART0               </span><span class="comment">/* Driver UART0 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #define RTE_Drivers_UART1               </span><span class="comment">/* Driver UART1 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #define RTE_Drivers_UART2               </span><span class="comment">/* Driver UART2 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #define RTE_Drivers_UART3               </span><span class="comment">/* Driver UART3 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #define RTE_Drivers_UART4               </span><span class="comment">/* Driver UART4 */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>  &lt;/RTE_Components_h&gt;</div>
<div class="line">  &lt;files&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;Drivers/UART/UART_MVCM3.c&quot;</span>/&gt;</div>
<div class="line">    &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;Drivers/UART/UART_MVCM3.h&quot;</span>/&gt;</div>
<div class="line">  &lt;/files&gt;</div>
<div class="line">&lt;/component&gt;</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The first two software components are added to <b>Device::HAL</b> because they are specific to the device family and are not using a published API. The drivers for I2C and UART are adhering to the <a href="https://www.keil.com/cmsis/driver" class="el" target="_blank">CMSIS-Driver</a> specification. Thus, they are added to the Cclass <b>CMSIS Driver</b>.  </dd></dl>
</li>
<li>
An example project has also been created. Add an <b>&lt;examples&gt;</b> section with the following: <div class="fragment"><div class="line">&lt;examples&gt;</div>
<div class="line">  &lt;example name=<span class="stringliteral">&quot;Dummy&quot;</span> doc=<span class="stringliteral">&quot;Abstract.txt&quot;</span> folder=<span class="stringliteral">&quot;Examples/dummy&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;Dummy project&lt;/description&gt;</div>
<div class="line">    &lt;board name=<span class="stringliteral">&quot;MVCM3 Starter Kit&quot;</span> vendor=<span class="stringliteral">&quot;MyVendor&quot;</span>/&gt;</div>
<div class="line">    &lt;project&gt;</div>
<div class="line">      &lt;environment name=<span class="stringliteral">&quot;uv&quot;</span> load=<span class="stringliteral">&quot;dummy.uvprojx&quot;</span>/&gt;</div>
<div class="line">    &lt;/project&gt;</div>
<div class="line">    &lt;attributes&gt;</div>
<div class="line">      &lt;category&gt;Getting Started&lt;/category&gt;</div>
<div class="line">    &lt;/attributes&gt;</div>
<div class="line">  &lt;/example&gt;</div>
<div class="line">&lt;/examples&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new version number: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.4&quot;</span>&gt;</div>
<div class="line">  DFP finalized</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
Finally, save the PDSC file and regenerate the Pack file using the <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">gen_pack.sh</a> script. Afterwards, install the Pack in your development tool.  </li>
</ol>
<p>This concludes the DFP tutorial. If you have a development board for your device, check out the next section that explains how to add boards to a pack to supply board support.</p>
<h1><a class="anchor" id="createPackBoard"></a>
Pack with Board Support</h1>
<p>A <a class="el" href="cp_PackTutorial.html#cp_SWComponents">Software Pack</a> that contains a <a class="el" href="pdsc_boards_pg.html">&lt;board&gt;</a> element is called Board Support Pack (BSP). A BSP may contain additional <b>Software Components</b>, <b>Example Projects</b>, as well as <b>Code Templates</b>. The typical content of a BSP is:</p>
<ul>
<li>Source code, libraries, header/configuration files for the underlying hardware and documentation (for example user manuals, getting started guides, and schematics).</li>
<li><a class="el" href="cp_PackTutorial.html#cp_Examples">Example Projects</a> that show the usage of the development board and its peripherals.</li>
<li><a class="el" href="cp_PackTutorial.html#cp_CodeTemplates">User Code Templates</a> that can be used as a starting point for using the development board or the mounted device.</li>
</ul>
<p>This section is a tutorial that explains how to create a BSP. Initially the PDSC file in the BSP only describes an evaluation board. This BSP is then extended to contain also software components that interface with the hardware of the board. Example projects and code templates may be added as described in the section <a class="el" href="cp_PackTutorial.html#cp_SWComponents">Pack with Software Components</a>.</p>
<h2>BSP Use Cases </h2>
<p>A BSP is typically provided by a Board Vendor and is used to <b>extend development tools</b> with support for development boards. In general, the BSP enables Board Vendors to distribute tool independent board support for their development platforms.<br/>
BSPs can also be used to provide information for the display on <b>web sites</b>. One example is the new boards page on <a href="https://developer.arm.com/embedded/cmsis/cmsis-packs/boards" class="el" target="_blank">developer.arm.com</a>:</p>
<div class="image">
<img src="BoardsSectionMusca-S1.png" alt="BoardsSectionMusca-S1.png"/>
<div class="caption">
Board information on a web site extracted from a BSP</div></div>
<h2><a class="anchor" id="cp_SpecDevBoard"></a>
Specify a Development Board</h2>
<p><b>Preparations</b></p>
<ol type="1">
<li>Install the Software Pack <a href="https://www.keil.com/dd2/arm/armcm3/" class="el" target="_blank">Keil::ARMCortex_DFP</a> as this will be required for the BSP to function properly.</li>
<li>Create a working directory on your PC, for example <b>C:\temp\working_bsp</b>.</li>
<li>Go to the directory <b>\CMSIS\Pack\Tutorials</b> available in the <b>ARM::CMSIS</b> Pack installation. Please consult your development tool's documentation for more information on the Pack installation directory structure. In a standard ÂµVision installation, you will find it below <b>%localappdata%\Arm\Packs\ARM\CMSIS\<em>version</em></b>.</li>
<li>Unzip the file <b>Pack_with_Board_Support.zip</b>.</li>
<li>Copy the <em>content</em> of the ZIP file's <b>01_Specify_Dev_Board</b> directory into your working directory.</li>
<li>Copy the <a class="el" href="bash_script.html">gen_pack.sh</a> script from your CMSIS-Pack installation's <b>\CMSIS\Pack\Bash</b> directory to the working directory.</li>
<li>Make sure that files/directories are not write protected (remove read-only flag).</li>
<li>Open the <b>MyVendor.MyBSP.pdsc</b> file in an editor.</li>
</ol>
<p><b>Code Example</b> </p>
<ol>
<li>
Add a <a class="el" href="pdsc_boards_pg.html#element_boards">&lt;boards&gt;</a> section in the PDSC file with the following: <div class="fragment"><div class="line">&lt;boards&gt;</div>
<div class="line">  &lt;board vendor=<span class="stringliteral">&quot;MyVendor&quot;</span> name=<span class="stringliteral">&quot;MyDevBoard&quot;</span> revision=<span class="stringliteral">&quot;V1&quot;</span> salesContact=<span class="stringliteral">&quot;sales@keil.com&quot;</span> orderForm=<span class="stringliteral">&quot;http://www.keil.com&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;MyVendor MyDevBoard Board Description&lt;/description&gt;</div>
<div class="line">    &lt;image small=<span class="stringliteral">&quot;Images/MyDevBoard_small.png&quot;</span> large=<span class="stringliteral">&quot;Images/MyDevBoard_large.png&quot;</span>/&gt;</div>
<div class="line">    &lt;book category=<span class="stringliteral">&quot;setup&quot;</span>     name=<span class="stringliteral">&quot;Docs/MyDevBoard/MyDevBoard_setup.pdf&quot;</span>      title=<span class="stringliteral">&quot;Getting Started&quot;</span>/&gt;</div>
<div class="line">    &lt;book category=<span class="stringliteral">&quot;schematic&quot;</span> name=<span class="stringliteral">&quot;Docs/MyDevBoard/MyDevBoard_schematics.pdf&quot;</span> title=<span class="stringliteral">&quot;Schematics&quot;</span>/&gt;</div>
<div class="line">    &lt;book category=<span class="stringliteral">&quot;manual&quot;</span>    name=<span class="stringliteral">&quot;Docs/MyDevBoard/MyDevBoard_um.pdf&quot;</span>         title=<span class="stringliteral">&quot;User Manual&quot;</span>/&gt;</div>
<div class="line">    &lt;mountedDevice             deviceIndex=<span class="stringliteral">&quot;0&quot;</span> Dvendor=<span class="stringliteral">&quot;ARM:82&quot;</span> Dname=<span class="stringliteral">&quot;ARMCM3&quot;</span>/&gt;</div>
<div class="line">    &lt;compatibleDevice          deviceIndex=<span class="stringliteral">&quot;0&quot;</span> Dvendor=<span class="stringliteral">&quot;ARM:82&quot;</span> Dfamily=<span class="stringliteral">&quot;ARM Cortex M3&quot;</span>/&gt;</div>
<div class="line">    &lt;feature type=<span class="stringliteral">&quot;ODbg&quot;</span>       n=<span class="stringliteral">&quot;1&quot;</span>           name=<span class="stringliteral">&quot;On-board J-LINK Lite&quot;</span>/&gt;</div>
<div class="line">    &lt;feature type=<span class="stringliteral">&quot;PWR&quot;</span>        n=<span class="stringliteral">&quot;5&quot;</span>           name=<span class="stringliteral">&quot;USB Powered&quot;</span>/&gt;</div>
<div class="line">    &lt;feature type=<span class="stringliteral">&quot;DIO&quot;</span>        n=<span class="stringliteral">&quot;8&quot;</span>/&gt;</div>
<div class="line">    &lt;feature type=<span class="stringliteral">&quot;SPI&quot;</span>        n=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">    &lt;feature type=<span class="stringliteral">&quot;LED&quot;</span>        n=<span class="stringliteral">&quot;6&quot;</span>           name=<span class="stringliteral">&quot;User LEDs&quot;</span>/&gt;</div>
<div class="line">    &lt;feature type=<span class="stringliteral">&quot;ArduinoFF&quot;</span>  n=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div>
<div class="line">    &lt;debugInterface adapter=<span class="stringliteral">&quot;J-Link Lite&quot;</span>      connector=<span class="stringliteral">&quot;Mini-USB&quot;</span>/&gt;</div>
<div class="line">  &lt;/board&gt;</div>
<div class="line">&lt;/boards&gt;</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>All code examples in this and the following sections can be found in the <code>snippets.xml</code> file in the <b>01_Specify_Dev_Board</b> directory.  </dd></dl>
</li>
<li>
<p class="startli">Finally, save the PDSC file and generate the Pack file using the <b>gen_pack.sh</b> script. See <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">Generate a Pack</a> for further details. Afterwards, install the Pack in your development tool.</p>
<div class="image">
<img src="DevBoardDisplay.png" alt="DevBoardDisplay.png"/>
<div class="caption">
Display of development boards in development tools</div></div>
 </li>
</ol>
<dl class="section note"><dt>Note</dt><dd>packChk.exe will display these warnings: <pre class="fragment">*** WARNING M304: C:\03_work\Packs\Arm\Tutorial\BSP\working\build\MyVendor.MyBSP.pdsc
  No package URL (&lt;url&gt;-tag and/or value) found in PDSC file!

*** WARNING M379: C:\03_work\Packs\Arm\Tutorial\BSP\working\build\MyVendor.MyBSP.pdsc (Line 28)
  No example(s) found for Board '[MyVendor] MyDevBoard'.
</pre> This is because this BSP does neither contain a download URL nor an example project for the board that has been specified.</dd></dl>
<h2><a class="anchor" id="cp_BundleExample"></a>
Create a BSP Bundle</h2>
<p>A bundle is basically a variant on the <code>Cclass</code> level. It specifies the attributes <code>Cclass</code>, <code>Cversion</code> and optionally <code>Cgroup</code> and <code>Cvendor</code> for a collection of interdependent components. Components within a bundle inherit the attributes set by the bundle and must not set these attributes again. Bundles ensure consistency of attributes across multiple interworking components and restrict the mix and match of components within a <code>Cclass</code> from different solutions. In addition to components, a bundle has the mandatory elements <code>description</code> and <code>doc</code> (for documentation).</p>
<p>Copy the <em>content</em> of the <b>02_BSP_Bundle</b> directory of the <b>Pack_with_Board_Support.zip</b> file to the current working directory: </p>
<ol>
<li>
Add a <code>&lt;conditions&gt;</code> section in your PDSC with the following (the <a class="el" href="cp_PackTutorial.html#cp_Conditions">conditions</a> section provides more information on this step): <div class="fragment"><div class="line">&lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;ARM Cortex M3 Series&quot;</span>&gt;</div>
<div class="line">  &lt;description&gt;ARM Cortex M3 device required&lt;/description&gt;</div>
<div class="line">  &lt;require Dfamily=<span class="stringliteral">&quot;ARM Cortex M3&quot;</span> Dvendor=<span class="stringliteral">&quot;ARM:82&quot;</span>/&gt;</div>
<div class="line">&lt;/condition&gt;</div>
<div class="line">&lt;condition <span class="keywordtype">id</span>=<span class="stringliteral">&quot;MyDevBoard Board Setup&quot;</span>&gt;</div>
<div class="line">  &lt;description&gt;Board Setup Code required&lt;/description&gt;</div>
<div class="line">  &lt;require condition=<span class="stringliteral">&quot;ARM Cortex M3 Series&quot;</span>/&gt;</div>
<div class="line">  &lt;require Cclass=<span class="stringliteral">&quot;Board Support&quot;</span> Cgroup=<span class="stringliteral">&quot;Board Setup&quot;</span>/&gt;</div>
<div class="line">&lt;/condition&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a <code>&lt;components&gt;</code> section in your PDSC with the following (the <a class="el" href="cp_PackTutorial.html#cp_Components">components</a> section provides more information on this step): <div class="fragment"><div class="line">&lt;bundle Cbundle=<span class="stringliteral">&quot;MyDevBoardSupport&quot;</span> Cclass=<span class="stringliteral">&quot;Board Support&quot;</span> Cversion=<span class="stringliteral">&quot;1.0.1&quot;</span>&gt;</div>
<div class="line">  &lt;description&gt;MyDevBoard custom board support package&lt;/description&gt;</div>
<div class="line">  &lt;doc&gt;Docs/BSP/MyBSP.htm&lt;/doc&gt;</div>
<div class="line">  &lt;component Cgroup=<span class="stringliteral">&quot;Board Setup&quot;</span> condition=<span class="stringliteral">&quot;ARM Cortex M3 Series&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;Custom board setup code&lt;/description&gt;</div>
<div class="line">    &lt;files&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;doc&quot;</span> name=<span class="stringliteral">&quot;Docs/BSP/Setup.htm&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Include/setup.h&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Source/setup.c&quot;</span>/&gt;</div>
<div class="line">    &lt;/files&gt;</div>
<div class="line">  &lt;/component&gt;</div>
<div class="line">  &lt;component Cgroup=<span class="stringliteral">&quot;I/O&quot;</span> Csub=<span class="stringliteral">&quot;LED&quot;</span> condition=<span class="stringliteral">&quot;MyDevBoard Board Setup&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;LED code <span class="keywordflow">for</span> custom board&lt;/description&gt;</div>
<div class="line">    &lt;files&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;doc&quot;</span> name=<span class="stringliteral">&quot;Docs/BSP/LED.htm&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Include/led.h&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Include/config_led.h&quot;</span> attr=<span class="stringliteral">&quot;config&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Source/led.c&quot;</span>/&gt;</div>
<div class="line">    &lt;/files&gt;</div>
<div class="line">  &lt;/component&gt;</div>
<div class="line">  &lt;component Cgroup=<span class="stringliteral">&quot;I/O&quot;</span> Csub=<span class="stringliteral">&quot;GPIO&quot;</span> condition=<span class="stringliteral">&quot;MyDevBoard Board Setup&quot;</span>&gt;</div>
<div class="line">    &lt;description&gt;GPIO code <span class="keywordflow">for</span> custom board&lt;/description&gt;</div>
<div class="line">    &lt;files&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;doc&quot;</span> name=<span class="stringliteral">&quot;Docs/BSP/GPIO.htm&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Include/gpio.h&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;header&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Include/config_gpio.h&quot;</span> attr=<span class="stringliteral">&quot;config&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;</div>
<div class="line">      &lt;file category=<span class="stringliteral">&quot;source&quot;</span> name=<span class="stringliteral">&quot;MySWComp/Source/gpio.c&quot;</span>/&gt;</div>
<div class="line">    &lt;/files&gt;</div>
<div class="line">  &lt;/component&gt;</div>
<div class="line">&lt;/bundle&gt;</div>
</div><!-- fragment -->  </li>
<li>
Add a new version number: <div class="fragment"><div class="line">&lt;release version=<span class="stringliteral">&quot;1.0.1&quot;</span> date=<span class="stringliteral">&quot;2020-12-01&quot;</span>&gt;</div>
<div class="line">  Board support bundle added</div>
<div class="line">&lt;/release&gt;</div>
</div><!-- fragment -->  </li>
<li>
<p class="startli">Finally, save the PDSC file and regenerate the Pack file using the <a class="el" href="cp_PackTutorial.html#cp_GeneratePack">gen_pack.sh</a> script. Afterwards, install the Pack in your development tool and observe the differences to version 1.0.0.</p>
<div class="image">
<img src="BSPBundleDisplay.png" alt="BSPBundleDisplay.png"/>
<div class="caption">
BSP bundle display in development tools</div></div>
 </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Feb 1 2021 16:48:05 for CMSIS-Pack Version 1.6.3 by Arm Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
