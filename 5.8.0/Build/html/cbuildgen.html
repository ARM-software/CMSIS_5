<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>cbuildgen: Build Process Manager</title>
<title>CMSIS-Build: cbuildgen: Build Process Manager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="cmsis.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="cmsis_footer.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="CMSIS_Logo_Final.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CMSIS-Build
   &#160;<span id="projectnumber">Version 0.10.0 (beta)</span>
   </div>
   <div id="projectbrief">Tools, software frameworks, and work flows for productivity with CMSIS based projects</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cbuildgen.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">cbuildgen: Build Process Manager </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>cbuildgen</b> is the core tool for the build process. It uses information from the CMSIS project file *.cprj, software packs, and environment variables.</p>
<ul>
<li>The *.cprj file lists all software packs (optionally with version), configuration files, and user files along with toolchain specific options.</li>
<li>Software packs are used to get source and include files of software components. The location of software packs is defined with the environment variable <code>$CMSIS_PACK_ROOT</code>.</li>
<li>The version of configuration files is specified in project file *.cprj and related software packs are used to update it.</li>
<li>Device information is read from the device family pack (DFP) that defines the device.</li>
<li>Command line options for a toolchain is used from the <b>&lt;name&gt;.&lt;version&gt;.mak</b> file, if not present in the project file directory, the <code>$CMSIS_COMPILER_ROOT</code> is used.</li>
</ul>
<p>The <code>&lt;ProjectFile&gt;</code>.mak file includes two additional makefiles:</p>
<ul>
<li>include <code>${CMSIS_BUILD_ROOT}/etc/Whitespace.mak</code> for handling of white space characters in filenames.</li>
<li>include <code>${CMSIS_COMPILER_ROOT}/&lt;name&gt;.&lt;version&gt;.mak</code> that specifies default options for the toolchain.</li>
</ul>
<h1><a class="anchor" id="cbuildgen_invocation"></a>
Invocation</h1>
<p><b>cbuildgen</b> is called from the <b>Bash</b> command line with the following syntax:</p>
<div class="fragment"><div class="line">cbuildgen &lt;ProjectFile&gt;.cprj &lt;command&gt; [&lt;args&gt;]</div>
</div><!-- fragment --><p><b>Where:</b></p>
<p><code>cbuildgen</code> is the name of tool.</p>
<p>&lt;<code>ProjectFile&gt;</code> is the name of the project file. The file extension (.cprj) is mandatory.</p>
<p>&lt;<code>command&gt;</code> specifies the operation of <code>cbuildgen</code> (see table below). Only one command is permitted per invocation.</p>
<p>[<code>&lt;args&gt;</code>] are additional arguments that control the operation of a command.</p>
<p><b>Operation</b> </p>
<table  class="cmtable" summary="cbuildgen commands">
<tr>
<th style="min-width:100px">&lt;command&gt; </th><th style="min-width:175px">&lt;arguments&gt; </th><th style="min-width:185px">Description </th><th style="min-width:175px">Details  </th></tr>
<tr>
<td>packlist </td><td></td><td>List missing packs. </td><td>Check the current list of installed packs in the directory <code>$CMSIS_PACK_ROOT</code>. The URLs of missing packs are written to <code>&lt;ProjectFile&gt;.cpinstall</code> file.  </td></tr>
<tr>
<td rowspan="3"></td><td>--toolchain=&lt;Toolchain&gt; </td><td>Select the toolchain. </td><td>For projects that can be built with multiple toolchains, it defines the toolchain for the build.  </td></tr>
<tr>
<td>--intdir=&lt;IntDir&gt; </td><td>Intermediate files output directory. </td><td>Output directory for the list of missing packs (cpinstall).  </td></tr>
<tr>
<td>--quiet </td><td>Suppress messages. </td><td>Suppresses all tool messages except build progress and result information.  </td></tr>
<tr>
<td>make </td><td></td><td>Generate makefile(s). </td><td>Generates <code>&lt;ProjectFile&gt;.mak</code> for <a class="el" href="make.html">Make</a> required to build the project. This command also generates a ASCII log file <code>&lt;ProjectFile&gt;.clog</code> recording location and version of the selected toolchain, packs, components and config files.   </td></tr>
<tr>
<td rowspan="6"></td><td>--toolchain=&lt;Toolchain&gt; </td><td>Select the toolchain. </td><td>For projects that can be built with multiple toolchains, it defines the toolchain for the build.  </td></tr>
<tr>
<td>--merge=&lt;MergeTool&gt; </td><td>Update configuration files. </td><td>When used with the command <code>make</code>, it generates also <code>&lt;ProjectFile&gt;_cfg.mak</code> for <a class="el" href="make.html">Make</a> to update configuration files using <a class="el" href="ccmerge.html">ccmerge: Config File Updater</a>.  </td></tr>
<tr>
<td>--update=&lt;CprjFile&gt; </td><td>Create fixed version CPRJ file. </td><td>Generate <code>&lt;CprjFile&gt;</code> with fixed versions for reproducing the current build.  </td></tr>
<tr>
<td>--outdir=&lt;OutDir&gt; </td><td>Build output directory. </td><td>Set output directory for binary executables, as well as log and map files.  </td></tr>
<tr>
<td>--intdir=&lt;IntDir&gt; </td><td>Intermediate files output directory. </td><td>Output directory for generated make files, list of missing packs (cpinstall), command files, object files, and dependency files.  </td></tr>
<tr>
<td>--quiet </td><td>Suppress messages. </td><td>Suppresses all tool messages except build progress and result information.  </td></tr>
<tr>
<td>cmake </td><td></td><td>Generate CMakeLists.txt file. </td><td>Generates <code>CMakeLists.txt</code> file for <a class="el" href="cmake.html">CMake</a> required to build the project. This command also generates a ASCII log file <code>&lt;ProjectFile&gt;.clog</code> recording location and version of the selected toolchain, packs, components and config files.   </td></tr>
<tr>
<td rowspan="5"></td><td>--toolchain=&lt;Toolchain&gt; </td><td>Select the toolchain. </td><td>For projects that can be built with multiple toolchains, it defines the toolchain for the build.  </td></tr>
<tr>
<td>--update=&lt;CprjFile&gt; </td><td>Create fixed version CPRJ file. </td><td>Generate <code>&lt;CprjFile&gt;</code> with fixed versions for reproducing the current build.  </td></tr>
<tr>
<td>--outdir=&lt;OutDir&gt; </td><td>Build output directory. </td><td>Set output directory for binary executables, as well as log and map files.  </td></tr>
<tr>
<td>--intdir=&lt;IntDir&gt; </td><td>Intermediate files output directory. </td><td>Output directory for generated make files, list of missing packs (cpinstall), command files, object files, and dependency files.  </td></tr>
<tr>
<td>--quiet </td><td>Suppress messages. </td><td>Suppresses all tool messages except build progress and result information.  </td></tr>
<tr>
<td>extract </td><td></td><td>Extract layer from project </td><td>Creates a sub directory named <code>./Layer/&lt;layername&gt;/</code> for each layer described in <code>&lt;ProjectFile&gt;.cprj</code>. These folders contain a layer description file <code>&lt;layername&gt;.clayer</code> and the project and configuration files belonging to the layer.   </td></tr>
<tr>
<td rowspan="3"></td><td>--layer=&lt;Layer1..N&gt; </td><td>Optional layer ID. </td><td>Specifies the layer name (ID) to be extracted. This option can be specified multiple times to select multiple layers.  </td></tr>
<tr>
<td>--outdir=&lt;OutDir&gt; </td><td>Output directory. </td><td>Set the output directory for the extracted layers.  </td></tr>
<tr>
<td>--quiet </td><td>Suppress messages. </td><td>Suppresses all tool messages except build progress and result information.  </td></tr>
<tr>
<td>remove </td><td></td><td>Remove layer from project </td><td>Updates the <code>&lt;ProjectFile&gt;.cprj</code> removing the layer description as well as all associated files and components for the layers specified at the command line. The command deletes the associated files from the respective project directory.   </td></tr>
<tr>
<td rowspan="2"></td><td>--layer=&lt;Layer1..N&gt; </td><td>Optional layer ID. </td><td>Specifies the layer name (ID) to be removed. This option can be specified multiple times to remove multiple layers.  </td></tr>
<tr>
<td>--quiet </td><td>Suppress messages. </td><td>Suppresses all tool messages except build progress and result information.  </td></tr>
<tr>
<td>compose </td><td></td><td>Create new project </td><td>Create new <code>&lt;ProjectFile&gt;.cprj</code> from layer files (<code>[...]/&lt;layername&gt;.clayer</code>) as well as copying associated files. One or more clayer files are required.   </td></tr>
<tr>
<td rowspan="2"></td><td>&lt;1.clayer&gt; .. &lt;N.clayer&gt; </td><td>Layer description file(s). </td><td>Specifies the layer description file(s) that are used to create the project. Please specify with full path.  </td></tr>
<tr>
<td>--quiet </td><td>Suppress messages. </td><td>Suppresses all tool messages except build progress and result information.  </td></tr>
<tr>
<td>add </td><td></td><td>Add layer to project </td><td>Updates the <code>&lt;ProjectFile&gt;.cprj</code> adding the layer description as well as all associated files and components for the clayer files specified at the command line. The command copies the associated files from the layer directory into the project directory. One or more clayer files are required.   </td></tr>
<tr>
<td rowspan="2"></td><td>&lt;1.clayer&gt; .. &lt;N.clayer&gt; </td><td>Layer description file(s). </td><td>Specifies the layer description file(s) that are added to the project. Please specify with full path.  </td></tr>
<tr>
<td>--quiet </td><td>Suppress messages. </td><td>Suppresses all tool messages except build progress and result information.  </td></tr>
</table>
<p>Note: <b>cbuildgen</b> does not update the *.cprj for commands <code>packlist</code>, <code>make</code> and <code>extract</code>. The merge tool updates the outdated configuration files with new merged data, keeping a copy of the original file.</p>
<h1><a class="anchor" id="cbuildgen_example"></a>
Usage Examples</h1>
<p><b>Create a list of missing packs</b></p>
<pre class="fragment">$ cbuildgen Simulation.cprj packlist
(cbuildgen): Build Process Manager 0.9.1 (C) 2020 ARM
M654: URL 'http://www.keil.com/pack/ARM.CMSIS.5.6.0.pack' was added to the list of missing packages.
M654: URL 'http://www.keil.com/pack/Keil.ARM_Compiler.1.6.1.pack' was added to the list of missing packages.
M650: Command completed successfully.
</pre><p><b>Generate make file for building the project</b></p>
<pre class="fragment">$ cbuildgen Simulation.cprj make
(cbuildgen): Build Process Manager 0.9.1 (C) 2020 ARM
M651: Generated makefile for merging config files: 'Simulation_cfg.mak'
M652: Generated makefile for project build:'Simulation.mak'
</pre><p><b>Extract a specific layer from the CPRJ file</b></p>
<pre class="fragment">$ cbuildgen Simulation.cprj extract --layer=Board --outdir=Layer
(cbuildgen): Build Process Manager 0.9.1 (C) 2020 ARM
M650: Command completed successfully.
</pre><dl class="section note"><dt>Note</dt><dd></dd></dl>
<p>The layer information is stored in <code>./Layer/Board/Board.clayer</code>.</p>
<p><b>Create a new CPRJ file from a specific list of layers</b></p>
<pre class="fragment">$ cbuildgen NewProject.cprj compose Layer/App/App.clayer Layer/Board/Board.clayer
(cbuildgen): Build Process Manager 0.9.1 (C) 2020 ARM
M650: Command completed successfully.
</pre><h1><a class="anchor" id="cbuildgen_errors"></a>
Error Messages</h1>
<table  class="cmtable" summary="cbuildgen invocation messages">
<tr>
<th>Message Number </th><th>Type </th><th>Description </th><th>Action  </th></tr>
<tr>
<td>M200 </td><td>ERROR </td><td>Invalid arguments! </td><td>At least one argument is wrong. See usage and correct the argument.  </td></tr>
<tr>
<td>M201 </td><td>ERROR </td><td>Too many arguments! </td><td>There is more arguments passed than allowed. See usage and correct the command line. </td></tr>
<tr>
<td>M202 </td><td>ERROR </td><td>No CPRJ input file was specified </td><td>A *.cprj file is not provided as an argument.   </td></tr>
<tr>
<td>M203 </td><td>ERROR </td><td>Error reading file(s) ...! </td><td>The listed file could not be read. Check file content.  </td></tr>
<tr>
<td>M204 </td><td>ERROR </td><td>File not found: ...! </td><td>The listed file was not found.  </td></tr>
<tr>
<td>M205 </td><td>ERROR </td><td>$CMSIS_PACK_ROOT environment variable is not defined! </td><td>The tool requires the environment variable $CMSIS_PACK_ROOT to locate the CMSIS Packs.  </td></tr>
<tr>
<td>M206 </td><td>ERROR </td><td>No command was specified! </td><td>The tool requires a command. See usage information for available commands (e.g. config, make)  </td></tr>
<tr>
<td>M207 </td><td>ERROR </td><td>Multiple commands were specified! </td><td>More than one command was provided in arguments. A single command is required.  </td></tr>
<tr>
<td>M208 </td><td>ERROR </td><td>Error copying file ...! </td><td>The specified file could not be copied and will be missing during build.  </td></tr>
<tr>
<td>M500 </td><td>ERROR </td><td>RTE Model reports: <em>MSG</em> </td><td>Error while preparing data. See message for more details.  </td></tr>
<tr>
<td>M502 </td><td>ERROR </td><td>RTE Model reports: <em>#error NUM: NAME : MSG</em> </td><td>Additional software components required.  </td></tr>
<tr>
<td>M504 </td><td>ERROR </td><td>RTE Model reports: MISSING: – <em>SPACE NAME</em> </td><td>Add the missing component.  </td></tr>
<tr>
<td>M600 </td><td>ERROR </td><td>Package index was not found in 'PATH/.Web </td><td>Check the package repository.  </td></tr>
<tr>
<td>M601 </td><td>ERROR </td><td>Package 'VENDOR.NAME' was not found in package index! </td><td>Check the package repository.  </td></tr>
<tr>
<td>M602 </td><td>ERROR </td><td>Package 'VENDOR.NAME.VER' was not found! </td><td>Check the package repository.  </td></tr>
<tr>
<td>M603 </td><td>ERROR </td><td>No version of package 'VENDOR.NAME' was found! </td><td>Check the package repository.  </td></tr>
<tr>
<td>M604 </td><td>ERROR </td><td>Unresolved package component: 'CMP' </td><td>Check project description file.  </td></tr>
<tr>
<td>M605 </td><td>ERROR </td><td>Wrong CPRJ specification! </td><td>Check project description file.  </td></tr>
<tr>
<td>M606 </td><td>ERROR </td><td>Device 'DEV (VENDOR)' was not found! </td><td>Check project description file.  </td></tr>
<tr>
<td>M607 </td><td>ERROR </td><td>RTE Model construction failed! </td><td>The CMSIS-Pack engine reports an error message.  </td></tr>
<tr>
<td>M608 </td><td>ERROR </td><td>No toolchain configuration file for 'NAME' version 'VER" was found! </td><td>Check CMSIS_COMPILER_ROOT or add the required toolchain configuration file to the project directory.  </td></tr>
<tr>
<td>M609 </td><td>ERROR </td><td>Missing 'NAME' element in CPRJ file! </td><td>Check project description file.  </td></tr>
<tr>
<td>M610 </td><td>ERROR </td><td>Project supports multiple toolchains. Select one with the option &ndash;toolchain </td><td>See usage and correct the argument.  </td></tr>
<tr>
<td>M611 </td><td>ERROR </td><td>Selected toolchain is not supported by the project </td><td>Check project description file or command line arguments.  </td></tr>
<tr>
<td>M630 </td><td>WARNING </td><td>Device ... is substituted by device variant ... . </td><td>Instead of the device specified by the project a variant found for this device is used.  </td></tr>
<tr>
<td>M650 </td><td>INFO </td><td>Setup run successfully </td><td>For information only.  </td></tr>
<tr>
<td>M651 </td><td>INFO </td><td>Generated makefile for merging config files: ...  </td><td>For information only.  </td></tr>
<tr>
<td>M652 </td><td>INFO </td><td>Generated makefile for project build:'NAME%.mak' </td><td>For information only.  </td></tr>
<tr>
<td>M653 </td><td>INFO </td><td>Local config file ... was not found. Copying default file from package. </td><td>Please validate whether the config file is intentionally missing. The default config file may be missing project specific settings.  </td></tr>
<tr>
<td>M654 </td><td>INFO </td><td>URL ... was added to the list of missing packages. </td><td>For information only.  </td></tr>
<tr>
<td>M655 </td><td>INFO </td><td>CMSIS_COMPILER_ROOT environment variable was not set! </td><td>For information only.  </td></tr>
<tr>
<td>M656 </td><td>INFO </td><td>Package 'VENDOR.NAME.VER' was found in local repository 'PATH'! </td><td>For information only.  </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="CmdLineBuild.html">Command Line Build</a></li>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script>    
    </li>
  </ul>
</div>
</body>
</html>
